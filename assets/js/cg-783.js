(window.webpackJsonp=window.webpackJsonp||[]).push([[783],{1088:function(t,_,v){"use strict";v.r(_);var r=v(8),e=Object(r.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"《分布式im系统》总体架构-第02节-分布式im即时通讯系统数据模型设计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#《分布式im系统》总体架构-第02节-分布式im即时通讯系统数据模型设计"}},[t._v("#")]),t._v(" 《分布式IM系统》总体架构-第02节：分布式IM即时通讯系统数据模型设计")]),t._v(" "),_("p",[t._v("作者：冰河\n"),_("br"),t._v("星球："),_("a",{attrs:{href:"https://public.zsxq.com/groups/48848484411888.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://m6z.cn/6aeFbs"),_("OutboundLink")],1),t._v(" "),_("br"),t._v("博客："),_("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host"),_("OutboundLink")],1),t._v(" "),_("br"),t._v("文章汇总："),_("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host/md/all/all.html"),_("OutboundLink")],1),t._v(" "),_("br"),t._v("源码获取地址："),_("a",{attrs:{href:"https://t.zsxq.com/0dhvFs5oR",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/0dhvFs5oR"),_("OutboundLink")],1),t._v(" "),_("br"),t._v("课程视频："),_("a",{attrs:{href:"https://t.zsxq.com/14ie4NqRD",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/14ie4NqRD"),_("OutboundLink")],1)]),t._v(" "),_("blockquote",[_("p",[t._v("沉淀，成长，突破，帮助他人，成就自我。")])]),t._v(" "),_("ul",[_("li",[t._v("本节难度：★★★☆☆")]),t._v(" "),_("li",[t._v("本节重点：对分布式IM即时通讯系统的数据模型进行设计，主要涉及到用户、好友关系、群组、群成员、单聊消息和群聊消息等的数据模型设计。")]),t._v(" "),_("li",[t._v("课程视频："),_("a",{attrs:{href:"https://t.zsxq.com/14ie4NqRD",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/14ie4NqRD"),_("OutboundLink")],1)])]),t._v(" "),_("p",[_("strong",[t._v("大家好，我是冰河~~")])]),t._v(" "),_("p",[t._v("经过前面对分布式IM即时通讯系统的功能需求、业务流程和技术流程的梳理，我们已经明确了分布式IM即时通讯系统的业务需求和技术需求，明确了分布式IM即时通讯系统的方案目标，以及对分布式IM即时通讯系统进行了总体架构设计。")]),t._v(" "),_("h2",{attrs:{id:"一、前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[t._v("#")]),t._v(" 一、前言")]),t._v(" "),_("p",[t._v("至此，我们已经清楚了分布式IM即时通讯系统的功能需求、业务流程、技术流程、方案目标以及总体架构设计，对这些内容做到心中有数后，我们就可以开始尝试梳理和设计分布式IM即时通讯系统的数据模型了。将这些数据模型梳理清楚，能够更好的指导我们研发分布式IM即时通讯系统。")]),t._v(" "),_("h2",{attrs:{id:"二、本章诉求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#二、本章诉求"}},[t._v("#")]),t._v(" 二、本章诉求")]),t._v(" "),_("p",[t._v("在整个分布式IM即时通讯系统的设计和研发过程中，尽量简化复杂的流程设计和无关紧要的业务设计，保留最核心的功能，让大家从分布式IM即时通讯系统中领略如何编写高并发程序，从总体上对系统的优化处理做到心中有数。")]),t._v(" "),_("p",[t._v("分布式IM即时通讯系统简化无关紧要的业务后，主要涉及到用户、好友关系、群组、群成员、单聊消息和群聊消息。这也是我们在设计和研发分布式IM即时通讯系统的过程中，要实现的最基础和最核心的功能。")]),t._v(" "),_("p",[t._v("本章，我们就一起对用户、好友关系、群组、群成员、单聊消息和群聊消息的数据模型进行简单的设计。")]),t._v(" "),_("h2",{attrs:{id:"三、数据模型设计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#三、数据模型设计"}},[t._v("#")]),t._v(" 三、数据模型设计")]),t._v(" "),_("p",[t._v("数据模型对于系统的建设是至关重要的，可以这么说，数据模型是系统正常运行的基石。无论一个系统如何建设和运行，最终这个系统的价值基本都会以数据的形式呈现出来。如何对这些数据建立对应的数据模型，来更好的支撑系统的运行，并且能够为人们带来更好的体验，使系统的价值最大化，这是在设计和研发系统的过程中需要重点考虑的问题。")]),t._v(" "),_("p",[t._v("本节，就本着最简化的原则来设计用户、好友关系、群组、群成员、单聊消息和群聊消息的数据模型。")]),t._v(" "),_("p",[_("strong",[t._v("注意：数据库脚本已经存放到"),_("code",[t._v("bh-im-resource")]),t._v("仓库下的"),_("code",[t._v("environment/mysql/init")]),t._v("目录下，脚本文件为"),_("code",[t._v("bh_im_init.sql")]),t._v("，后续在搭建分布式IM即时通讯系统的研发环境时，会自动将数据脚本导入到MySQL数据库，无需自己重新运行脚本文件。")])]),t._v(" "),_("h3",{attrs:{id:"_3-1-用户模型设计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-用户模型设计"}},[t._v("#")]),t._v(" 3.1 用户模型设计")]),t._v(" "),_("p",[t._v("对于用户模型数据来说，简化后的模型字段包括："),_("strong",[t._v("用户id、用户名、密码、用户昵称、用户头像、用户头像缩略图、性别、用户类型、个性签名、最后登录时间、创建时间")]),t._v("，整体如下所示。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("长度")]),t._v(" "),_("th",[t._v("默认值")]),t._v(" "),_("th",[t._v("是否必填")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("id")]),t._v(" "),_("td",[t._v("bigint")]),t._v(" "),_("td",[t._v("20")]),t._v(" "),_("td",[t._v("无")]),t._v(" "),_("td",[t._v("是")]),t._v(" "),_("td",[t._v("用户id")])]),t._v(" "),_("tr",[_("td",[t._v("user_name")]),t._v(" "),_("td",[t._v("varchar")]),t._v(" "),_("td",[t._v("20")]),t._v(" "),_("td",[t._v("无")]),t._v(" "),_("td",[t._v("是")]),t._v(" "),_("td",[t._v("用户名")])]),t._v(" "),_("tr",[_("td",[t._v("password")]),t._v(" "),_("td",[t._v("varchar")]),t._v(" "),_("td",[t._v("64")]),t._v(" "),_("td",[t._v("无")]),t._v(" "),_("td",[t._v("是")]),t._v(" "),_("td",[t._v("密码")])]),t._v(" "),_("tr",[_("td",[t._v("nick_name")]),t._v(" "),_("td",[t._v("varchar")]),t._v(" "),_("td",[t._v("64")]),t._v(" "),_("td",[t._v("无")]),t._v(" "),_("td",[t._v("是")]),t._v(" "),_("td",[t._v("用户昵称")])]),t._v(" "),_("tr",[_("td",[t._v("head_image")]),t._v(" "),_("td",[t._v("varchar")]),t._v(" "),_("td",[t._v("255")]),t._v(" "),_("td",[t._v("空")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("用户头像")])]),t._v(" "),_("tr",[_("td",[t._v("head_image_thumb")]),t._v(" "),_("td",[t._v("varchar")]),t._v(" "),_("td",[t._v("255")]),t._v(" "),_("td",[t._v("空")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("用户头像缩略图")])]),t._v(" "),_("tr",[_("td",[t._v("sex")]),t._v(" "),_("td",[t._v("tinyint")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("性别 0:男 1:女")])]),t._v(" "),_("tr",[_("td",[t._v("type")]),t._v(" "),_("td",[t._v("smallint")]),t._v(" "),_("td",[t._v("6")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("用户类型 1:普通用户 2:审核账户")])]),t._v(" "),_("tr",[_("td",[t._v("signature")]),t._v(" "),_("td",[t._v("varchar")]),t._v(" "),_("td",[t._v("1024")]),t._v(" "),_("td",[t._v("空")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("个性签名")])]),t._v(" "),_("tr",[_("td",[t._v("last_login_time")]),t._v(" "),_("td",[t._v("datetime")]),t._v(" "),_("td",[t._v("默认")]),t._v(" "),_("td",[t._v("NULL")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("最后登录时间")])]),t._v(" "),_("tr",[_("td",[t._v("created_time")]),t._v(" "),_("td",[t._v("datetime")]),t._v(" "),_("td",[t._v("默认")]),t._v(" "),_("td",[t._v("NULL")]),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("创建时间")])])])]),t._v(" "),_("h3",{attrs:{id:"_3-2-好友关系模型设计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-好友关系模型设计"}},[t._v("#")]),t._v(" 3.2 好友关系模型设计")]),t._v(" "),_("h2",{attrs:{id:"查看完整文章"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[t._v("#")]),t._v(" 查看完整文章")]),t._v(" "),_("p",[t._v("加入"),_("a",{attrs:{href:"https://public.zsxq.com/groups/48848484411888.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("冰河技术"),_("OutboundLink")],1),t._v("知识星球，解锁完整技术文章、小册、视频与完整代码")])])}),[],!1,null,null,null);_.default=e.exports}}]);