(window.webpackJsonp=window.webpackJsonp||[]).push([[359],{660:function(n,t,s){"use strict";s.r(t);var a=s(8),e=Object(a.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"《spring核心技术》第10章-创建对象型注解-深度解析-component注解-含-repository、-service和-controller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#《spring核心技术》第10章-创建对象型注解-深度解析-component注解-含-repository、-service和-controller"}},[n._v("#")]),n._v(" 《Spring核心技术》第10章-创建对象型注解：深度解析@Component注解（含@Repository、@Service和@Controller）")]),n._v(" "),t("p",[n._v("作者：冰河\n"),t("br"),n._v("星球："),t("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[n._v("http://m6z.cn/6aeFbs"),t("OutboundLink")],1),n._v(" "),t("br"),n._v("博客："),t("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://binghe.gitcode.host"),t("OutboundLink")],1),n._v(" "),t("br"),n._v("文章汇总："),t("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://binghe.gitcode.host/md/all/all.html"),t("OutboundLink")],1),n._v(" "),t("br"),n._v("源码地址："),t("a",{attrs:{href:"https://github.com/binghe001/spring-annotation-book/tree/master/spring-annotation-chapter-10",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://github.com/binghe001/spring-annotation-book/tree/master/spring-annotation-chapter-10"),t("OutboundLink")],1)]),n._v(" "),t("blockquote",[t("p",[n._v("沉淀，成长，突破，帮助他人，成就自我。")])]),n._v(" "),t("p",[t("strong",[n._v("大家好，我是冰河~~")])]),n._v(" "),t("hr"),n._v(" "),t("ul",[t("li",[t("p",[t("strong",[n._v("本章难度")]),n._v("：★★★★☆")])]),n._v(" "),t("li",[t("p",[t("strong",[n._v("本章重点")]),n._v("：进一步学习并掌握@Component注解向IOC容器中注入Bean的案例和流程，从源码级别彻底掌握@Component注解在Spring底层的执行流程。")])])]),n._v(" "),t("hr"),n._v(" "),t("p",[n._v("本节目录如下所示：")]),n._v(" "),t("ul",[t("li",[n._v("学习指引")]),n._v(" "),t("li",[n._v("注解说明\n"),t("ul",[t("li",[n._v("注解源码")]),n._v(" "),t("li",[n._v("使用场景")])])]),n._v(" "),t("li",[n._v("使用案例")]),n._v(" "),t("li",[n._v("源码时序图")]),n._v(" "),t("li",[n._v("源码解析")]),n._v(" "),t("li",[n._v("总结")]),n._v(" "),t("li",[n._v("思考")]),n._v(" "),t("li",[n._v("VIP服务")])]),n._v(" "),t("h2",{attrs:{id:"一、学习指引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、学习指引"}},[n._v("#")]),n._v(" 一、学习指引")]),n._v(" "),t("p",[t("code",[n._v("Spring中的@Component注解，你真的彻底了解过吗？")])]),n._v(" "),t("p",[n._v("@Component注解可以说是Spring中使用的比较频繁的一个注解了。在项目开发过程中，我们自己编写的类如果想注入到Spring中，由Spring来管理Bean的生命周期，就可以使用@Component注解将其注入到IOC容器中。并且@Component注解还有三个衍生注解，那就是@Repository、@Service和@Controller注解，并且衍生出的注解通常会在使用MVC架构开发项目时，标注到MVC架构的分层类上。比如：@Repository通常会被标注到表示dao层的类上，@Service注解通常会被标注到表示Service层的类上，而@Controller注解通常会被标注到表示Controller层的类上。")]),n._v(" "),t("h2",{attrs:{id:"二、注解说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、注解说明"}},[n._v("#")]),n._v(" 二、注解说明")]),n._v(" "),t("p",[t("code",[n._v("关于@Component注解的一点点说明~~")])]),n._v(" "),t("p",[n._v("使用Spring开发项目时，如果类上标注了@Component注解，当启动IOC容器时，Spring扫描到标注了@Component注解的单例Bean，就会创建对应的Bean对象并注入到IOC容器中。")]),n._v(" "),t("h3",{attrs:{id:"_2-1-注解源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-注解源码"}},[n._v("#")]),n._v(" 2.1 注解源码")]),n._v(" "),t("p",[n._v("IOC容器在启动时，如果扫描到被标注了@Component注解的类，则会将这些类的类定义信息自动注入IOC容器，并创建这些类的对象。")]),n._v(" "),t("p",[n._v("@Component注解的源码详见：org.springframework.stereotype.Component。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("/**\n * @author Mark Fisher\n * @since 2.5\n * @see Repository\n * @see Service\n * @see Controller\n */")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Target")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ElementType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Retention")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("RetentionPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("RUNTIME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Documented")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Indexed")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@interface")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Component")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("String")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("default")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br")])]),t("p",[n._v("从源码可以看出，@Component注解是从Spring2.5版本开始提供的注解，并且@Component注解只能标注到类上。其中只含有一个String类型的value属性，具体含义如下所示。")]),n._v(" "),t("ul",[t("li",[n._v("value：用于指定注入容器时Bean的id。如果没有指定Bean的id，默认值为当前类的名称。")])]),n._v(" "),t("p",[n._v("@Component注解提供了三个衍生注解：分别是：@Repository、@Service和@Controller注解。")]),n._v(" "),t("p",[n._v("（1）@Repository注解")]),n._v(" "),t("p",[n._v("@Repository注解的源码详见：org.springframework.stereotype.Repository。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("/**\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @since 2.0\n * @see Component\n * @see Service\n */")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Target")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ElementType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Retention")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("RetentionPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("RUNTIME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Documented")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Component")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@interface")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Repository")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@AliasFor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("annotation "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("String")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("default")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br")])]),t("p",[n._v("（2）@Service注解")]),n._v(" "),t("p",[n._v("@Service注解的源码详见：org.springframework.stereotype.Service。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("/**\n * @author Juergen Hoeller\n * @since 2.5\n * @see Component\n * @see Repository\n */")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Target")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ElementType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Retention")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("RetentionPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("RUNTIME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Documented")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Component")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@interface")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Service")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@AliasFor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("annotation "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("String")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("default")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br")])]),t("p",[n._v("（3）@Controller注解")]),n._v(" "),t("p",[n._v("@Controller注解注解的源码详见：org.springframework.stereotype.Controller。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("/**\n * @author Arjen Poutsma\n * @author Juergen Hoeller\n * @since 2.5\n * @see Component\n * @see org.springframework.web.bind.annotation.RequestMapping\n * @see org.springframework.context.annotation.ClassPathBeanDefinitionScanner\n */")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Target")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ElementType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Retention")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("RetentionPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("RUNTIME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Documented")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Component")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@interface")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Controller")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@AliasFor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("annotation "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("String")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("default")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br")])]),t("p",[n._v("可以看到，@Repository、@Service和@Controller注解本质上还是@Component注解，这里不再赘述。")]),n._v(" "),t("h3",{attrs:{id:"_2-2-使用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-使用场景"}},[n._v("#")]),n._v(" 2.2 使用场景")]),n._v(" "),t("p",[n._v("在Spring开发项目的过程中，如果需要将自己创建的类注入到IOC容器中，就可以使用@Component注解，也可以使用@Repository、@Service和@Controller注解。其中，@Component注解一般会被标注到非三层（非MVC架构）类上，而@Repository、@Service和@Controller注解通常会被标注到三层架构的类上。并且@Repository通常会被标注到表示dao层的类上，@Service注解通常会被标注到表示Service层的类上，而@Controller注解通常会被标注到表示Controller层的类上。")]),n._v(" "),t("p",[t("strong",[n._v("这里，需要注意的是，基于Spring的注解开发项目时，必须先将类对象交给Spring管理，然后Spring会处理类中的属性和方法。如果类没有被Spring接管，那么类里面的属性和方法上的注解都不会被解析。")])]),n._v(" "),t("h2",{attrs:{id:"三、使用案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、使用案例"}},[n._v("#")]),n._v(" 三、使用案例")]),n._v(" "),t("p",[t("code",[n._v("@Component的实现案例，我们一起实现吧~~")])]),n._v(" "),t("p",[n._v("本节，就基于@Component注解、@Repository、@Service和@Controller注解实现简单的案例程序，观察被上述四个注解标注的类是否注入到IOC容器中。具体实现步骤如下所示。")]),n._v(" "),t("p",[t("strong",[n._v("（1）新建ComponentBean类")])]),n._v(" "),t("p",[n._v("ComponentBean类的源码详见：spring-annotation-chapter-10工程下的io.binghe.spring.annotation.chapter10.component.ComponentBean。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Component")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ComponentBean")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br")])]),t("p",[n._v("可以看到，ComponentBean就是一个标注了@Component注解的普通类。")]),n._v(" "),t("p",[t("strong",[n._v("（2）新建RepositoryBean类")])]),n._v(" "),t("p",[n._v("RepositoryBean类的源码详见：spring-annotation-chapter-10工程下的io.binghe.spring.annotation.chapter10.component.RepositoryBean。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Repository")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("RepositoryBean")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br")])]),t("p",[n._v("可以看到，RepositoryBean类就是一个标注了@Repository注解的普通类。")]),n._v(" "),t("p",[t("strong",[n._v("（3）新建ServiceBean类")])]),n._v(" "),t("p",[n._v("ServiceBean类的源码详见：spring-annotation-chapter-10工程下的io.binghe.spring.annotation.chapter10.component.ServiceBean。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Service")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ServiceBean")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br")])]),t("p",[n._v("可以看到，ServiceBean类就是一个标注了@Service注解的普通类。")]),n._v(" "),t("p",[t("strong",[n._v("（4）新建ControllerBean类")])]),n._v(" "),t("p",[n._v("ControllerBean类的源码详见：spring-annotation-chapter-10工程下的io.binghe.spring.annotation.chapter10.component.ControllerBean。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Controller")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ControllerBean")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br")])]),t("p",[n._v("可以看到，ControllerBean类就是一个标注了@Controller注解的普通类。")]),n._v(" "),t("p",[t("strong",[n._v("（5）新建ComponentConfig类")])]),n._v(" "),t("p",[n._v("ComponentConfig类的源码详见：spring-annotation-chapter-10工程下的io.binghe.spring.annotation.chapter10.config.ComponentConfig。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Configuration")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@ComponentScan")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"io.binghe.spring.annotation.chapter10"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ComponentConfig")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br")])]),t("p",[n._v("可以看到，ComponentConfig类上标注了@Configuration，说明ComponentConfig类是一个Spring的配置类，并且使用@ComponentScan注解指定了扫描的包名是io.binghe.spring.annotation.chapter10。")]),n._v(" "),t("p",[t("strong",[n._v("（6）新建ComponentTest类")])]),n._v(" "),t("p",[n._v("ComponentTest类的源码详见：spring-annotation-chapter-10工程下的io.binghe.spring.annotation.chapter10.ComponentTest。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ComponentTest")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("static")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("void")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("AnnotationConfigApplicationContext")]),n._v(" context "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("new")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("AnnotationConfigApplicationContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("ComponentConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v(" definitionNames "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("getBeanDefinitionNames")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Arrays")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("stream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("definitionNames"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("forEach")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("definitionName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("->")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("definitionName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br")])]),t("p",[n._v("可以看到，在ComponentTest类的main()方法中打印了IOC容器中注入的Bean对象的名称。")]),n._v(" "),t("p",[t("strong",[n._v("（7）运行ComponentTest类")])]),n._v(" "),t("p",[n._v("运行ComponentTest类的main()方法，输出的结果信息如下所示。")]),n._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[n._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("annotation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("internalConfigurationAnnotationProcessor\norg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("annotation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("internalAutowiredAnnotationProcessor\norg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("event"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("internalEventListenerProcessor\norg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("event"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("internalEventListenerFactory\ncomponentConfig\ncomponentBean\ncontrollerBean\nrepositoryBean\nserviceBean\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br")])]),t("p",[n._v("从输出的结果信息可以看出，打印出了被@Component、@Repository、@Service和@Controller注解标注的Bean的名称。")]),n._v(" "),t("p",[t("strong",[n._v("说明：使用Spring开发项目时，如果Spring扫描到类上标注了@Component、@Repository、@Service和@Controller注解的单例Bean，就会创建对应的Bean对象并注入到IOC容器中。")])]),n._v(" "),t("h2",{attrs:{id:"四、源码时序图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、源码时序图"}},[n._v("#")]),n._v(" 四、源码时序图")]),n._v(" "),t("p",[t("code",[n._v("结合时序图理解源码会事半功倍，你觉得呢？")])]),n._v(" "),t("p",[n._v("本节，就以源码时序图的方式，直观的感受下@Component注解在Spring源码层面的执行流程。@Component注解在Spring源码层面执行的时序图如图10-1~10~3所示。")]),n._v(" "),t("p",[t("strong",[n._v("注意：@Repository、@Service和@Controller注解本质上还是@Component注解，这里就不再单独分析@Repository、@Service和@Controller注解的执行流程。")])]),n._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"图10-1","data-src":"https://binghe.gitcode.host/assets/images/frame/spring/ioc/spring-core-2023-03-02-001.png",loading:"lazy"}})]),n._v(" "),t("h2",{attrs:{id:"查看完整文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[n._v("#")]),n._v(" 查看完整文章")]),n._v(" "),t("p",[n._v("加入"),t("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[n._v("冰河技术"),t("OutboundLink")],1),n._v("知识星球，解锁完整技术文章与完整代码")])])}),[],!1,null,null,null);t.default=e.exports}}]);