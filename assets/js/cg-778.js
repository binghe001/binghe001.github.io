(window.webpackJsonp=window.webpackJsonp||[]).push([[778],{1084:function(s,a,e){"use strict";e.r(a);var t=e(8),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"《分布式im系统》环境搭建-第03节-分布式im即时通讯系统maven私服搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#《分布式im系统》环境搭建-第03节-分布式im即时通讯系统maven私服搭建"}},[s._v("#")]),s._v(" 《分布式IM系统》环境搭建-第03节：分布式IM即时通讯系统Maven私服搭建")]),s._v(" "),a("p",[s._v("作者：冰河\n"),a("br"),s._v("星球："),a("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://m6z.cn/6aeFbs"),a("OutboundLink")],1),s._v(" "),a("br"),s._v("博客："),a("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://binghe.gitcode.host"),a("OutboundLink")],1),s._v(" "),a("br"),s._v("文章汇总："),a("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://binghe.gitcode.host/md/all/all.html"),a("OutboundLink")],1),s._v(" "),a("br"),s._v("源码获取地址："),a("a",{attrs:{href:"https://t.zsxq.com/0dhvFs5oR",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://t.zsxq.com/0dhvFs5oR"),a("OutboundLink")],1),s._v(" "),a("br"),s._v("课程视频："),a("a",{attrs:{href:"https://t.zsxq.com/15Xw7Odd6",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://t.zsxq.com/15Xw7Odd6"),a("OutboundLink")],1)]),s._v(" "),a("blockquote",[a("p",[s._v("沉淀，成长，突破，帮助他人，成就自我。")])]),s._v(" "),a("ul",[a("li",[s._v("本章难度：★★☆☆☆")]),s._v(" "),a("li",[s._v("本章重点：基于Docker搭建Maven私服仓库，统一管理分布式IM即时通讯系统各服务依赖的Jar文件，掌握Maven私服搭建的方法和步骤，并能够将其灵活应用到自身实际项目中。")]),s._v(" "),a("li",[s._v("课程视频："),a("a",{attrs:{href:"https://t.zsxq.com/15Xw7Odd6",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://t.zsxq.com/15Xw7Odd6"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("strong",[s._v("大家好，我是冰河~~")])]),s._v(" "),a("p",[s._v("分布式IM即时通讯系统后端服务总体上会包含：多系统共用模型与工具、即时通讯后端服务、大后端平台、即时通讯SDK、OpenAI大模型接入服务等，如何统一管理这些后端服务所依赖的类库呢？一种比较方便并且友好的方式就是我们自己搭建一套Maven私我仓库来统一管理这些依赖的Jar文件。")]),s._v(" "),a("h2",{attrs:{id:"一、前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[s._v("#")]),s._v(" 一、前言")]),s._v(" "),a("p",[s._v("搭建Maven私服仓库可以提高项目构建和部署的效率、稳定性和安全性，同时方便管理内部开发的组件和私有库，比较适用于企业内部或者特定场景下的需求。针对分布式IM即时通讯系统来说，对于后端服务，我们将其划分成了多系统共用模型与工具、即时通讯后端服务、大后端平台、即时通讯SDK、OpenAI大模型接入服务等。")]),s._v(" "),a("p",[s._v("其中，多系统共用模型与工具会被其他服务依赖，即时通讯SDK和OpenAI大模型接入服务也会被其他服务依赖，并且多系统共用模型与工具、即时通讯SDK和OpenAI大模型接入服务都是我们开发分布式IM即时通讯系统时的私有库和组件，所以，在设计和研发分布式IM即时通讯系统的过程中，我们需要搭建一套自己的Maven私服来统一管理这些私有库和组件。")]),s._v(" "),a("h2",{attrs:{id:"二、本节诉求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、本节诉求"}},[s._v("#")]),s._v(" 二、本节诉求")]),s._v(" "),a("p",[s._v("基于Docker搭建Maven私服仓库，统一管理分布式IM即时通讯系统各个服务依赖的Jar文件和类库，重点掌握基于Docker搭建Maven私服仓库的方式方法，并将其灵活应用到实际项目中。")]),s._v(" "),a("h2",{attrs:{id:"三、环境说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、环境说明"}},[s._v("#")]),s._v(" 三、环境说明")]),s._v(" "),a("ul",[a("li",[s._v("服务器版本：CentOS7")]),s._v(" "),a("li",[s._v("主机名：binghe102")]),s._v(" "),a("li",[s._v("IP地址：192.168.106.102")]),s._v(" "),a("li",[s._v("Maven私服镜像：sonatype/nexus3")])]),s._v(" "),a("h2",{attrs:{id:"四、环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、环境搭建"}},[s._v("#")]),s._v(" 四、环境搭建")]),s._v(" "),a("p",[s._v("基于Docker搭建Maven私服的步骤如下所示。")]),s._v(" "),a("p",[a("strong",[s._v("（1）下载Nexus3镜像")])]),s._v(" "),a("p",[s._v("在服务器命令行输入如下命令，下载Nexus3镜像。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull sonatype/nexus3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这里，视网络情况，可能需要耐心等待一会儿。")]),s._v(" "),a("p",[a("strong",[s._v("（2）查看Nexus3镜像")])]),s._v(" "),a("p",[s._v("在服务器命令行输入如下命令，查看下载的Nexus3镜像。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@binghe102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY        TAG       IMAGE ID       CREATED         SIZE\nsonatype/nexus3   latest    589f7296a4a2   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" months ago   655MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("可以看到，已经成功下载Nexus3镜像。")]),s._v(" "),a("p",[a("strong",[s._v("（3）创建Nexus3挂载文件夹")])]),s._v(" "),a("p",[s._v("在服务器命令行输入如下命令，创建nexus的挂载文件夹。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/nexus-data "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" /usr/local/nexus-data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("（4）启动Nexus3容器")])]),s._v(" "),a("p",[s._v("在服务器命令行输入如下命令，启动Nexus3容器。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v(":8081 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" nexus "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /usr/local/nexus-data:/nexus-data "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always sonatype/nexus3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("可以看到，在上述启动命令中，我们将Nexus3容器的"),a("code",[s._v("/nexus-data")]),s._v("目录映射到了宿主机的"),a("code",[s._v("/usr/local/nexus-data")]),s._v("目录。此时，Nexus3容器运行过程中，在"),a("code",[s._v("/nexus-data")]),s._v("目录产生的文件和日志都会在宿主机的"),a("code",[s._v("/usr/local/nexus-data")]),s._v("目录中查看到。")]),s._v(" "),a("p",[a("strong",[s._v("（5）查看Nexus3容器启动状态")])]),s._v(" "),a("p",[s._v("在服务器命令行输入如下命令，查看Nexus3容器启动状态。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@binghe102 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE             COMMAND                  CREATED         STATUS         PORTS                                       NAMES\n59e27830bbaa   sonatype/nexus3   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sh -c ${SONATYPE_DI…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8081-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("/tcp, :::8081-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("/tcp   nexus\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("可以看到，Nexus3容器启动成功，监听了8081端口。")]),s._v(" "),a("h2",{attrs:{id:"五、nexus3配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、nexus3配置"}},[s._v("#")]),s._v(" 五、Nexus3配置")]),s._v(" "),a("p",[s._v("搭建完Nexus3环境后，我们还需要对其进行配置，具体配置的步骤如下所示。")]),s._v(" "),a("h3",{attrs:{id:"_5-1-打开nexus3页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-打开nexus3页面"}},[s._v("#")]),s._v(" 5.1 打开Nexus3页面")]),s._v(" "),a("p",[s._v("Nexus3容器启动时监听的端口和宿主机端口都是8081，所以，我们在浏览器地址栏输入"),a("code",[s._v("http://192.168.106.102:8081")]),s._v("打开Nexus3页面，如图3-1所示。")]),s._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://binghe.gitcode.host/images/project/im/2023-12-05-001.png?raw=true",width:"70%"}}),s._v(" "),a("br")]),s._v(" "),a("h2",{attrs:{id:"查看完整文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[s._v("#")]),s._v(" 查看完整文章")]),s._v(" "),a("p",[s._v("加入"),a("a",{attrs:{href:"https://public.zsxq.com/groups/48848484411888.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("冰河技术"),a("OutboundLink")],1),s._v("知识星球，解锁完整技术文章、小册、视频与完整代码")])])}),[],!1,null,null,null);a.default=r.exports}}]);