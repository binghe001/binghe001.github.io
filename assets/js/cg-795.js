(window.webpackJsonp=window.webpackJsonp||[]).push([[795],{1132:function(s,a,e){"use strict";e.r(a);var t=e(15),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"《实战ai大模型》增强与优化-第03节-分离部署duix-avatar服务端和客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#《实战ai大模型》增强与优化-第03节-分离部署duix-avatar服务端和客户端"}},[s._v("#")]),s._v(" 《实战AI大模型》增强与优化-第03节：分离部署Duix.Avatar服务端和客户端")]),s._v(" "),a("p",[s._v("作者：冰河\n"),a("br"),s._v("星球："),a("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://m6z.cn/6aeFbs"),a("OutboundLink")],1),s._v(" "),a("br"),s._v("博客："),a("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://binghe.gitcode.host"),a("OutboundLink")],1),s._v(" "),a("br"),s._v("文章汇总："),a("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://binghe.gitcode.host/md/all/all.html"),a("OutboundLink")],1),s._v(" "),a("br"),s._v("源码获取地址："),a("a",{attrs:{href:"https://t.zsxq.com/0dhvFs5oR",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://t.zsxq.com/0dhvFs5oR"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("大家好，我是冰河~~")])]),s._v(" "),a("p",[s._v("今天，继续带着大家学习《实战AI大模型专栏》，今天带着大家一起部署部署Duix.Avatar服务端和客户端。好了，开始今天的正文。")]),s._v(" "),a("h2",{attrs:{id:"一、duix-avatar介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、duix-avatar介绍"}},[s._v("#")]),s._v(" 一、Duix.Avatar介绍")]),s._v(" "),a("p",[s._v("Duix.Avatar（ 之前叫作HeyGem）是由 Duix 团队打造的一款免费开源 AI 数字人生成工具。它支持在本地环境中进行部署，也提供 API 调用服务。使用者仅需提供一段约 10  秒的真人视频素材，即可快速克隆出对应的数字人形象与声音。随后，无论是输入文本脚本还是直接上传音频文件，都能驱动该数字人自动生成口型匹配、音画同步的口播视频。")]),s._v(" "),a("p",[a("strong",[s._v("主要特性包括：")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("快速克隆能力")]),s._v("：基于约 10 秒的短视频，即可高效完成形象与声音的复刻。")]),s._v(" "),a("li",[a("strong",[s._v("灵活的驱动方式")]),s._v("：支持通过输入文案或上传预制音频两种模式，来驱动数字人生成播报视频。")]),s._v(" "),a("li",[a("strong",[s._v("完整的离线运行")]),s._v("：所有处理流程均在本地完成，无需连接网络，极大保障了数据隐私与安全性。")]),s._v(" "),a("li",[a("strong",[s._v("高品质视频合成")]),s._v("：确保生成的视频中，人物口型与语音高度同步，呈现自然流畅的播报效果。")]),s._v(" "),a("li",[a("strong",[s._v("广泛的语言适配")]),s._v("：目前支持包括中文、英语、日语、韩语、法语、德语、阿拉伯语及西班牙语在内的八种语言脚本。")])]),s._v(" "),a("p",[a("strong",[s._v("推荐运行配置参考：")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("处理器")]),s._v("：英特尔 酷睿 i5-13400F（第13代）或同等性能及以上")]),s._v(" "),a("li",[a("strong",[s._v("运行内存")]),s._v("：32 GB 或更高（为保证流程顺畅，建议不低于此容量）")]),s._v(" "),a("li",[a("strong",[s._v("图形显卡")]),s._v("：NVIDIA GeForce RTX 4070 或性能相近的型号")])]),s._v(" "),a("h2",{attrs:{id:"二、环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、环境准备"}},[s._v("#")]),s._v(" 二、环境准备")]),s._v(" "),a("h3",{attrs:{id:"_2-1-安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装docker"}},[s._v("#")]),s._v(" 2.1 安装Docker")]),s._v(" "),a("p",[a("strong",[s._v("（1）更新APT软件包索引并安装必要的工具")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" ca-certificates "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" gnupg lsb-release\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("（2）卸载旧版本")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" docker-engine docker.io containerd runc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("（3）添加Docker官方GPG密钥和APT软件源")])]),s._v(" "),a("p",[s._v("添加Docker的官方GPG密钥，用于验证软件包的完整性。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /etc/apt/keyrings\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://download.docker.com/linux/ubuntu/gpg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" gpg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dearmor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /etc/apt/keyrings/docker.gpg\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("设置稳定版的Docker APT仓库。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch='),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("dpkg --print-architecture"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-cs")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' stable"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/apt/sources.list.d/docker.list "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("（4）安装Docker Engine及相关组件")])]),s._v(" "),a("p",[s._v("再次更新APT包索引，使其包含新添加的Docker仓库。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装Docker Engine、命令行工具"),a("code",[s._v("docker-cli")]),s._v("以及容器运行时"),a("code",[s._v("containerd")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" docker-ce docker-ce-cli containerd.io docker-compose-plugin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-2-安装与管理docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-安装与管理docker-compose"}},[s._v("#")]),s._v(" 2.2 安装与管理Docker Compose")]),s._v(" "),a("p",[s._v("从Docker Engine 20.10.0版本开始，官方推荐使用"),a("strong",[s._v("Docker Compose Plugin")]),s._v("（即"),a("code",[s._v("docker-compose-plugin")]),s._v("包）。我们在上一步已经安装了这个插件，它通过 "),a("code",[s._v("docker compose")]),s._v(" 命令（注意中间没有横线 "),a("code",[s._v("-")]),s._v("）来使用。")]),s._v(" "),a("p",[s._v("检查"),a("code",[s._v("docker compose")]),s._v("的版本，确认其已正确安装。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" compose version\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或使用完整路径（如果你是sudo用户）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" compose version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("如果显示docker compose的版本号，就说明docker compose已经安装成功了。")]),s._v(" "),a("h3",{attrs:{id:"_2-3-配置与优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-配置与优化"}},[s._v("#")]),s._v(" 2.3 配置与优化")]),s._v(" "),a("p",[a("strong",[s._v("（1）以非root用户管理Docker（强烈建议）")])]),s._v(" "),a("p",[s._v("默认需要"),a("code",[s._v("sudo")]),s._v("才能运行"),a("code",[s._v("docker")]),s._v("命令。为了避免每次都输入"),a("code",[s._v("sudo")]),s._v("，可以将你的普通用户加入到"),a("code",[s._v("docker")]),s._v("用户组。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aG")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("重要")]),s._v("：执行此命令后，需要"),a("strong",[s._v("完全注销并重新登录")]),s._v("，或者重启系统，这个组权限变更才会生效。之后就可以直接使用 "),a("code",[s._v("docker")]),s._v(" 和 "),a("code",[s._v("docker compose")]),s._v(" 命令了。")]),s._v(" "),a("p",[a("strong",[s._v("（2）配置Docker镜像加速器")])]),s._v(" "),a("p",[s._v("在国内从Docker Hub拉取镜像可能较慢，可以配置国内镜像加速器（例如阿里云、腾讯云、中科大等提供的服务）。编辑Docker的守护进程配置文件（如果文件不存在则新建）：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/docker/daemon.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在文件中添加以下内容（这里以阿里云加速器为例，你可以在阿里云容器镜像服务控制台获取专属加速地址）：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://your-mirror.mirror.aliyuncs.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("保存文件（按 "),a("code",[s._v("Ctrl+X")]),s._v("，然后按 "),a("code",[s._v("Y")]),s._v("，最后按 "),a("code",[s._v("Enter")]),s._v("），并重启Docker服务使配置生效：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("（3）设置Docker开机自启")])]),s._v(" "),a("p",[s._v("执行如下命令配置Docker在系统启动时自动运行。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" docker.service\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" containerd.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"三、部署服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、部署服务端"}},[s._v("#")]),s._v(" 三、部署服务端")]),s._v(" "),a("p",[s._v("打开Duix.Avatar项目的github链接："),a("a",{attrs:{href:"https://github.com/duixcom/Duix-Avatar",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/duixcom/Duix-Avatar"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"查看完整文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[s._v("#")]),s._v(" 查看完整文章")]),s._v(" "),a("p",[s._v("加入"),a("a",{attrs:{href:"https://public.zsxq.com/groups/48848484411888.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("冰河技术"),a("OutboundLink")],1),s._v("知识星球，解锁完整技术文章、小册、视频与完整代码")])])}),[],!1,null,null,null);a.default=r.exports}}]);