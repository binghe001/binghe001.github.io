(window.webpackJsonp=window.webpackJsonp||[]).push([[981],{1281:function(t,e,r){"use strict";r.r(e);var v=r(8),_=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"《seckill秒杀系统》第102章-链路追踪核心原理与解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#《seckill秒杀系统》第102章-链路追踪核心原理与解决方案"}},[t._v("#")]),t._v(" 《Seckill秒杀系统》第102章：链路追踪核心原理与解决方案")]),t._v(" "),e("p",[t._v("作者：冰河\n"),e("br"),t._v("星球："),e("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://m6z.cn/6aeFbs"),e("OutboundLink")],1),t._v(" "),e("br"),t._v("博客："),e("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host"),e("OutboundLink")],1),t._v(" "),e("br"),t._v("文章汇总："),e("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host/md/all/all.html"),e("OutboundLink")],1),t._v(" "),e("br"),t._v("源码获取地址："),e("a",{attrs:{href:"https://t.zsxq.com/0dhvFs5oR",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/0dhvFs5oR"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("沉淀，成长，突破，帮助他人，成就自我。")])]),t._v(" "),e("ul",[e("li",[t._v("本章难度：★★☆☆☆")]),t._v(" "),e("li",[t._v("本章重点：了解链路追踪的核心原理与落地实现方案，熟练掌握业务系统整合链路追踪的落地方案，并能够灵活将实现方案应用到自身实际项目中。")])]),t._v(" "),e("p",[e("strong",[t._v("大家好，我是冰河~~")])]),t._v(" "),e("p",[t._v("一个系统采用分布式与微服务架构后，会被拆分成许多服务模块，这些服务模块之间的调用关系错综复杂，对于客户端请求的分析与处理就会显得异常复杂。此时，就需要一种技术来解决这些问题，而这种技术就是分布式链路追踪技术。")]),t._v(" "),e("h2",{attrs:{id:"一、前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[t._v("#")]),t._v(" 一、前言")]),t._v(" "),e("p",[t._v("随着互联网的不断发展，企业的业务系统变得越来越复杂，原本单一的单体应用系统已经无法满足企业业务发展的需要。于是，很多企业开始了对项目的分布式与微服务改造，新项目也在开始的时候就会采用分布式与微服务的架构模式。在分布式与微服务架构模式下，由于服务模块之间复杂的调用关系，对于客服端请求的分析与处理就变得非常复杂了。")]),t._v(" "),e("h2",{attrs:{id:"二、本章诉求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、本章诉求"}},[t._v("#")]),t._v(" 二、本章诉求")]),t._v(" "),e("p",[t._v("介绍链路追踪的核心原理与落地实现方案，掌握链路追踪技术的应用场景，熟练掌握业务系统整合链路追踪的落地方案，并能够灵活将实现方案应用到自身实际项目中。")]),t._v(" "),e("h2",{attrs:{id:"三、分布式链路追踪"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、分布式链路追踪"}},[t._v("#")]),t._v(" 三、分布式链路追踪")]),t._v(" "),e("p",[t._v("随着互联网业务快速扩展，企业的业务系统变得越来越复杂，不少企业开始向分布式、微服务方向发展，将原本的单体应用拆分成分布式、微服务。这也使得当客户端请求系统的接口时，原本在同一个系统内部的请求逻辑变成了需要在多个微服务之间流转的请求。")]),t._v(" "),e("p",[t._v("单体架构中可以使用AOP在调用具体的业务逻辑前后分别打印一下时间即可计算出整体的调用时间，使用 AOP捕获异常也可知道是哪里的调用导致的异常。")]),t._v(" "),e("p",[t._v("但是在分布式微服务场景下，使用AOP技术是无法追踪到各个微服务的调用情况的，也就无法知道系统中处理一次请求的整体调用链路。")]),t._v(" "),e("p",[t._v("另外，在分布式与微服务场景下，我们需要解决如下问题：")]),t._v(" "),e("ul",[e("li",[t._v("如何快速发现并定位到分布式系统中的问题。")]),t._v(" "),e("li",[t._v("如何尽可能精确的判断故障对系统的影响范围与影响程度。")]),t._v(" "),e("li",[t._v("如何尽可能精确的梳理出服务之间的依赖关系，并判断出服务之间的依赖关系是否合理。")]),t._v(" "),e("li",[t._v("如何尽可能精确的分析整个系统调用链路的性能与瓶颈点。")]),t._v(" "),e("li",[t._v("如何尽可能精确的分析系统的存储瓶颈与容量规划。")]),t._v(" "),e("li",[t._v("如何实时观测系统的整体调用链路情况。")])]),t._v(" "),e("p",[t._v("上述问题就是分布式链路追踪技术要解决的问题。所谓的分布式链路追踪，就是将对分布式系统的一次请求转化成一个完整的调用链路。这个完整的调用链路从请求进入分布式系统的入口开始，直到整个请求返回为止。并在请求调用微服务的过程中，记录相应的调用日志，监控系统调用的性能，并且可以按照某种方式显示请求调用的情况。")]),t._v(" "),e("p",[t._v("在分布式链路追踪中，可以统计调用每个微服务的耗时，请求会经过哪些微服务的流转，每个微服务的运行状况等信息。")]),t._v(" "),e("h2",{attrs:{id:"四、核心原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、核心原理"}},[t._v("#")]),t._v(" 四、核心原理")]),t._v(" "),e("p",[t._v("假定三个微服务调用的链路如下图所示：Service 1 调用 Service 2，Service 2 调用 Service 3 和 Service 4。")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://binghe.gitcode.host/images/project/seckill/seckill-2023-09-12-001.png?raw=true",width:"80%"}}),t._v(" "),e("br")]),t._v(" "),e("p",[t._v("那么链路追踪会在每个服务调用的时候加上 Trace ID 和 Span ID。如下图所示：")]),t._v(" "),e("h2",{attrs:{id:"查看完整文章"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[t._v("#")]),t._v(" 查看完整文章")]),t._v(" "),e("p",[t._v("加入"),e("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[t._v("冰河技术"),e("OutboundLink")],1),t._v("知识星球，解锁完整技术文章与完整代码")])])}),[],!1,null,null,null);e.default=_.exports}}]);