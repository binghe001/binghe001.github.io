(window.webpackJsonp=window.webpackJsonp||[]).push([[967],{1270:function(t,s,a){"use strict";a.r(s);var n=a(8),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"《seckill秒杀系统》第99章-秒杀系统整合nacos配置中心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#《seckill秒杀系统》第99章-秒杀系统整合nacos配置中心"}},[t._v("#")]),t._v(" 《Seckill秒杀系统》第99章：秒杀系统整合Nacos配置中心")]),t._v(" "),s("p",[t._v("作者：冰河\n"),s("br"),t._v("星球："),s("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://m6z.cn/6aeFbs"),s("OutboundLink")],1),t._v(" "),s("br"),t._v("博客："),s("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host"),s("OutboundLink")],1),t._v(" "),s("br"),t._v("文章汇总："),s("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host/md/all/all.html"),s("OutboundLink")],1),t._v(" "),s("br"),t._v("源码获取地址："),s("a",{attrs:{href:"https://t.zsxq.com/0dhvFs5oR",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/0dhvFs5oR"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("沉淀，成长，突破，帮助他人，成就自我。")])]),t._v(" "),s("ul",[s("li",[t._v("本章难度：★★☆☆☆")]),t._v(" "),s("li",[t._v("本章重点：了解配置中心的实现原理，重点掌握配置中心在实际项目中的落地实现方案，熟练掌握业务系统整合Nacos配置中心的方法与落地方案，并能够灵活将实现方案应用到自身实际项目中。")])]),t._v(" "),s("p",[s("strong",[t._v("大家好，我是冰河~~")])]),t._v(" "),s("p",[t._v("将一个系统拆分成微服务之后，每个微服务都各自维护一套配置文件，当修改服务配置后，还需要重启微服务。这种方式不仅增加了微服务维护的成本，而且还存在漏改配置项的风险。")]),t._v(" "),s("h2",{attrs:{id:"一、前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[t._v("#")]),t._v(" 一、前言")]),t._v(" "),s("p",[t._v("随着秒杀系统拆分的微服务越来越多，我们需要一个统一的方式来管理和维护各个微服的配置内容，以便能够及时有效的更新各个微服务的状态配置，此时Nacos配置中心就能够满足我们的需求。")]),t._v(" "),s("h2",{attrs:{id:"二、本章诉求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、本章诉求"}},[t._v("#")]),t._v(" 二、本章诉求")]),t._v(" "),s("p",[t._v("将秒杀系统的各个微服务的配置整合进Nacos配置中心，在Nacos配置中心里统一维护和管理。重点掌握配置中心在实际项目中的落地实现方案，熟练掌握业务系统整合Nacos配置中心的方法与落地方案，并能够灵活将实现方案应用到自身实际项目中。")]),t._v(" "),s("h2",{attrs:{id:"三、整合nacos配置中心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、整合nacos配置中心"}},[t._v("#")]),t._v(" 三、整合Nacos配置中心")]),t._v(" "),s("p",[t._v("本节，我们以用户微服务整合Nacos配置中心为例进行说明，其他微服务整合Nacos配置中心的方式与用户微服务整合Nacos配置中心的方式相同，这里不再赘述。大家可以拿到本章对应的源码后，自行查看代码即可。另外，本章涉及到的各个微服务整合进Nacos的配置，已经放到本章源码分支的"),s("code",[t._v("environment/config/nacos/chapter99")]),t._v("目录下，大家根据具体需要，自行将配置导入Nacos即可，也可以根据本章的内容自行在Nacos中进行配置。")]),t._v(" "),s("p",[s("strong",[t._v("注意：将微服务的配置放在Nacos中时，就暂时不用微服务中的application.properties配置文件了，而是在项目中新建一个bootstrap.properties文件。因为配置文件的优先级从高到低依次为：bootstrap.properties -> bootstrap.yml -> application.properties -> application.yml。")])]),t._v(" "),s("h3",{attrs:{id:"_3-1-新增配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-新增配置"}},[t._v("#")]),t._v(" 3.1 新增配置")]),t._v(" "),s("p",[s("strong",[t._v("（1）新增Maven依赖")])]),t._v(" "),s("p",[t._v("在秒杀系统的父工程中的pom.xml文件中添加如下依赖。")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-bootstrap"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[s("strong",[t._v("（2）新增bootstrap.properties配置文件")])]),t._v(" "),s("p",[t._v("在seckill-user-starter工程下的"),s("code",[t._v("src/main/resources")]),t._v("目录下新增bootstrap.properties配置文件，文件内容如下所示。")]),t._v(" "),s("div",{staticClass:"language-properties line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# application")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.application.name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("seckill-user")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Nacos Config")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.cloud.nacos.config.server-addr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1:8848")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.cloud.nacos.config.file-extension")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("properties")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.cloud.nacos.config.namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("seckill-config")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.cloud.nacos.config.access-key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("nacos")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.cloud.nacos.config.secret-key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("nacos")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.cloud.nacos.config.group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("seckill-user-group")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# spring active")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.profiles.active")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("dev")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h3",{attrs:{id:"_3-2-配置nacos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-配置nacos"}},[t._v("#")]),t._v(" 3.2 配置Nacos")]),t._v(" "),s("p",[s("strong",[t._v("（1）启动Nacos，进入配置列表页")])]),t._v(" "),s("p",[t._v("启动Nacos，在浏览器中输入"),s("code",[t._v("http://localhost:8848/nacos")]),t._v(" 并登录Nacos，选择Nacos菜单中的配置管理-配置列表，如图99-1所示。")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://binghe.gitcode.host/images/project/seckill/seckill-2023-09-09-001.png?raw=true",width:"80%"}}),t._v(" "),s("br")]),t._v(" "),s("p",[t._v("这里需要注意的是选择seckill-config命名空间。")]),t._v(" "),s("h2",{attrs:{id:"查看完整文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[t._v("#")]),t._v(" 查看完整文章")]),t._v(" "),s("p",[t._v("加入"),s("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[t._v("冰河技术"),s("OutboundLink")],1),t._v("知识星球，解锁完整技术文章与完整代码")])])}),[],!1,null,null,null);s.default=e.exports}}]);