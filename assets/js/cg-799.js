(window.webpackJsonp=window.webpackJsonp||[]).push([[799],{1134:function(t,e,r){"use strict";r.r(e);var v=r(15),_=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"《高性能polaris网关》通用模型-第11节-网关上下文顶层抽象接口设计"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#《高性能polaris网关》通用模型-第11节-网关上下文顶层抽象接口设计"}},[t._v("#")]),t._v(" 《高性能Polaris网关》通用模型-第11节：网关上下文顶层抽象接口设计")]),t._v(" "),e("p",[t._v("作者：冰河\n"),e("br"),t._v("星球："),e("a",{attrs:{href:"http://m6z.cn/6aeFbs",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://m6z.cn/6aeFbs"),e("OutboundLink")],1),t._v(" "),e("br"),t._v("博客："),e("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host"),e("OutboundLink")],1),t._v(" "),e("br"),t._v("文章汇总："),e("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://binghe.gitcode.host/md/all/all.html"),e("OutboundLink")],1),t._v(" "),e("br"),t._v("源码获取地址："),e("a",{attrs:{href:"https://t.zsxq.com/0dhvFs5oR",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/0dhvFs5oR"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("沉淀，成长，突破，帮助他人，成就自我。")])]),t._v(" "),e("ul",[e("li",[t._v("本章难度：★★☆☆☆")]),t._v(" "),e("li",[t._v("本节重点：对高性能Polaris网关的上下文顶层抽象接口进行设计，从全局角度掌握高性能Polaris网关上下文顶层抽象接口的设计。重点掌握整体调用链路的设计思路和设计方法，并能够将其灵活应用到自身实际项目中。")])]),t._v(" "),e("p",[e("strong",[t._v("大家好，我是冰河~~")])]),t._v(" "),e("p",[t._v("在网关的上下文设计中，已经完成了网关上下文属性顶层接口、抽象类、工厂类和实现类的设计。可以说，已经完成了网关上下文通用模型的大部分设计，也为最终设计通用模型中网关的核心上下文做好了铺垫。")]),t._v(" "),e("h2",{attrs:{id:"一、前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[t._v("#")]),t._v(" 一、前言")]),t._v(" "),e("p",[t._v("在前面的文章中，已经对高性能Polaris网关的请求与响应模型的顶层接口和实现进行了设计，对调用链路的顶层接口与抽象类模型进行了设计和实现，又对网关服务的定义与实例模型和服务配置的缓存接口与实现类进行了设计。随后，从网关上下文的角度，对网关上下文的顶层接口、抽象类工厂类和具体实现类进行了设计。接下来，就对网关上下文的顶层抽象接口进行设计。")]),t._v(" "),e("h2",{attrs:{id:"二、本节诉求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、本节诉求"}},[t._v("#")]),t._v(" 二、本节诉求")]),t._v(" "),e("p",[t._v("对高性能Polaris网关的上下文顶层抽象接口进行设计，从全局角度掌握高性能Polaris网关上下文顶层抽象接口的设计。重点掌握整体调用链路的设计思路和设计方法，并能够将其灵活应用到自身实际项目中。")]),t._v(" "),e("h2",{attrs:{id:"三、类结构设计"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、类结构设计"}},[t._v("#")]),t._v(" 三、类结构设计")]),t._v(" "),e("p",[t._v("网关上下文顶层抽象接口设计如图11-1所示。")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://binghe.gitcode.host/images/project/gateway/2024-10-02-001.png?raw=true",width:"70%"}}),t._v(" "),e("br")]),t._v(" "),e("p",[t._v("可以看到，在网关上下文的顶层接口设计中，主要设计了两个顶层接口，一个是Context接口，一个是PolarisContext接口。其中，PolarisContext接口是Context接口的子接口，各接口的职责和提供的方法说明如下：")]),t._v(" "),e("p",[e("strong",[t._v("（1）Context接口")])]),t._v(" "),e("p",[t._v("网关上下文的顶层核心接口，主要实现网关请求生命周期的状态与方法定义，提供的字段和方法如下所示。")]),t._v(" "),e("ul",[e("li",[t._v("RUNNING：请求正在运行中的状态。")]),t._v(" "),e("li",[t._v("WRITTEN： 处理完请求，需要写回响应标记的状态。")]),t._v(" "),e("li",[t._v("COMPLETED：响应数据成功的状态。")]),t._v(" "),e("li",[t._v("TERMINATED：请求与响应结束的状态。")]),t._v(" "),e("li",[t._v("running()方法：设置状态为运行中。")]),t._v(" "),e("li",[t._v("written()方法：设置状态为处理完请求，需要写回响应标记。")]),t._v(" "),e("li",[t._v("completed()方法：设置状态为响应数据成功的状态。")]),t._v(" "),e("li",[t._v("terminated()方法：设置状态为请求与响应结束。")]),t._v(" "),e("li",[t._v("isRunning()方法：判断状态是否为运行中。")]),t._v(" "),e("li",[t._v("isWritten()方法：判断状态是否为需要写回响应标记。")]),t._v(" "),e("li",[t._v("isCompleted()方法：判断状态是否为响应数据成功的状态。")]),t._v(" "),e("li",[t._v("isTerminated()方法：判断状态是否为请求与响应结束。")]),t._v(" "),e("li",[t._v("getServerReceiveRequestTime()方法：网关服务端接收请求的时间。")]),t._v(" "),e("li",[t._v("setServerReceiveRequestTime(l)方法：设置网关服务端接收请求时间。")]),t._v(" "),e("li",[t._v("getServerSendResponseTime()方法：获取网关服务端发送响应时间。")]),t._v(" "),e("li",[t._v("setServerSendResponseTime()方法：设置网关服务端发送响应时间。")]),t._v(" "),e("li",[t._v("getClientSendRequestTime()方法：获取网关客户端发送请求时间。")]),t._v(" "),e("li",[t._v("setClientSendRequestTime()方法：设置网关客户端发送请求时间。")]),t._v(" "),e("li",[t._v("getClientReceiveRequestTime()方法：获取网关客户端接收响应时间。")]),t._v(" "),e("li",[t._v("setClientReceiveRequestTime()方法：设置网关客户端接收响应时间。")])]),t._v(" "),e("p",[e("strong",[t._v("（2）PolarisContext接口")])]),t._v(" "),e("p",[t._v("PolarisContext接口继承Context接口，是网关上下文最核心的接口，提供的核心方法如下所示。")]),t._v(" "),e("h2",{attrs:{id:"查看完整文章"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[t._v("#")]),t._v(" 查看完整文章")]),t._v(" "),e("p",[t._v("加入"),e("a",{attrs:{href:"https://public.zsxq.com/groups/48848484411888.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("冰河技术"),e("OutboundLink")],1),t._v("知识星球，解锁完整技术文章、小册、视频与完整代码")])])}),[],!1,null,null,null);e.default=_.exports}}]);