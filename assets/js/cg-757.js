(window.webpackJsonp=window.webpackJsonp||[]).push([[757],{1057:function(_,t,v){"use strict";v.r(t);var r=v(7),d=Object(r.a)({},(function(){var _=this,t=_._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"《分布式im系统》总体架构-第02节-分布式im即时通讯系统数据模型设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#《分布式im系统》总体架构-第02节-分布式im即时通讯系统数据模型设计"}},[_._v("#")]),_._v(" 《分布式IM系统》总体架构-第02节：分布式IM即时通讯系统数据模型设计")]),_._v(" "),t("p",[_._v("作者：冰河\n"),t("br"),_._v("星球："),t("a",{attrs:{href:"https://public.zsxq.com/groups/48848484411888.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("http://m6z.cn/6aeFbs"),t("OutboundLink")],1),_._v(" "),t("br"),_._v("博客："),t("a",{attrs:{href:"https://binghe.gitcode.host",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://binghe.gitcode.host"),t("OutboundLink")],1),_._v(" "),t("br"),_._v("文章汇总："),t("a",{attrs:{href:"https://binghe.gitcode.host/md/all/all.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://binghe.gitcode.host/md/all/all.html"),t("OutboundLink")],1),_._v(" "),t("br"),_._v("源码获取地址："),t("a",{attrs:{href:"https://t.zsxq.com/0dhvFs5oR",target:"_blank",rel:"noopener noreferrer"}},[_._v("https://t.zsxq.com/0dhvFs5oR"),t("OutboundLink")],1)]),_._v(" "),t("blockquote",[t("p",[_._v("沉淀，成长，突破，帮助他人，成就自我。")])]),_._v(" "),t("ul",[t("li",[_._v("本节难度：★★★☆☆")]),_._v(" "),t("li",[_._v("本节重点：对分布式IM即时通讯系统的数据模型进行设计，主要涉及到用户、好友关系、群组、群成员、单聊消息和群聊消息等的数据模型设计。")])]),_._v(" "),t("p",[t("strong",[_._v("大家好，我是冰河~~")])]),_._v(" "),t("p",[_._v("经过前面对分布式IM即时通讯系统的功能需求、业务流程和技术流程的梳理，我们已经明确了分布式IM即时通讯系统的业务需求和技术需求，明确了分布式IM即时通讯系统的方案目标，以及对分布式IM即时通讯系统进行了总体架构设计。")]),_._v(" "),t("h2",{attrs:{id:"一、前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[_._v("#")]),_._v(" 一、前言")]),_._v(" "),t("p",[_._v("至此，我们已经清楚了分布式IM即时通讯系统的功能需求、业务流程、技术流程、方案目标以及总体架构设计，对这些内容做到心中有数后，我们就可以开始尝试梳理和设计分布式IM即时通讯系统的数据模型了。将这些数据模型梳理清楚，能够更好的指导我们研发分布式IM即时通讯系统。")]),_._v(" "),t("h2",{attrs:{id:"二、本章诉求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、本章诉求"}},[_._v("#")]),_._v(" 二、本章诉求")]),_._v(" "),t("p",[_._v("在整个分布式IM即时通讯系统的设计和研发过程中，尽量简化复杂的流程设计和无关紧要的业务设计，保留最核心的功能，让大家从分布式IM即时通讯系统中领略如何编写高并发程序，从总体上对系统的优化处理做到心中有数。")]),_._v(" "),t("p",[_._v("分布式IM即时通讯系统简化无关紧要的业务后，主要涉及到用户、好友关系、群组、群成员、单聊消息和群聊消息。这也是我们在设计和研发分布式IM即时通讯系统的过程中，要实现的最基础和最核心的功能。")]),_._v(" "),t("p",[_._v("本章，我们就一起对用户、好友关系、群组、群成员、单聊消息和群聊消息的数据模型进行简单的设计。")]),_._v(" "),t("h2",{attrs:{id:"三、数据模型设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、数据模型设计"}},[_._v("#")]),_._v(" 三、数据模型设计")]),_._v(" "),t("p",[_._v("数据模型对于系统的建设是至关重要的，可以这么说，数据模型是系统正常运行的基石。无论一个系统如何建设和运行，最终这个系统的价值基本都会以数据的形式呈现出来。如何对这些数据建立对应的数据模型，来更好的支撑系统的运行，并且能够为人们带来更好的体验，使系统的价值最大化，这是在设计和研发系统的过程中需要重点考虑的问题。")]),_._v(" "),t("p",[_._v("本节，就本着最简化的原则来设计用户、好友关系、群组、群成员、单聊消息和群聊消息的数据模型。")]),_._v(" "),t("p",[t("strong",[_._v("注意：数据库脚本已经存放到"),t("code",[_._v("bh-im-resource")]),_._v("仓库下的"),t("code",[_._v("environment/mysql/init")]),_._v("目录下，脚本文件为"),t("code",[_._v("bh-im-init.sql")]),_._v("，后续在搭建分布式IM即时通讯系统的研发环境时，会自动将数据脚本导入到MySQL数据库，无需自己重新运行脚本文件。")])]),_._v(" "),t("h3",{attrs:{id:"_3-1-用户模型设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-用户模型设计"}},[_._v("#")]),_._v(" 3.1 用户模型设计")]),_._v(" "),t("p",[_._v("对于用户模型数据来说，简化后的模型字段包括："),t("strong",[_._v("用户id、用户名、密码、用户昵称、用户头像、用户头像缩略图、性别、用户类型、个性签名、最后登录时间、创建时间")]),_._v("，整体如下所示。")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("字段名称")]),_._v(" "),t("th",[_._v("类型")]),_._v(" "),t("th",[_._v("长度")]),_._v(" "),t("th",[_._v("默认值")]),_._v(" "),t("th",[_._v("是否必填")]),_._v(" "),t("th",[_._v("说明")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("id")]),_._v(" "),t("td",[_._v("bigint")]),_._v(" "),t("td",[_._v("20")]),_._v(" "),t("td",[_._v("无")]),_._v(" "),t("td",[_._v("是")]),_._v(" "),t("td",[_._v("用户id")])]),_._v(" "),t("tr",[t("td",[_._v("user_name")]),_._v(" "),t("td",[_._v("varchar")]),_._v(" "),t("td",[_._v("20")]),_._v(" "),t("td",[_._v("无")]),_._v(" "),t("td",[_._v("是")]),_._v(" "),t("td",[_._v("用户名")])]),_._v(" "),t("tr",[t("td",[_._v("password")]),_._v(" "),t("td",[_._v("varchar")]),_._v(" "),t("td",[_._v("64")]),_._v(" "),t("td",[_._v("无")]),_._v(" "),t("td",[_._v("是")]),_._v(" "),t("td",[_._v("密码")])]),_._v(" "),t("tr",[t("td",[_._v("nick_name")]),_._v(" "),t("td",[_._v("varchar")]),_._v(" "),t("td",[_._v("64")]),_._v(" "),t("td",[_._v("无")]),_._v(" "),t("td",[_._v("是")]),_._v(" "),t("td",[_._v("用户状态，1：正常；2：冻结")])]),_._v(" "),t("tr",[t("td",[_._v("head_image")]),_._v(" "),t("td",[_._v("varchar")]),_._v(" "),t("td",[_._v("255")]),_._v(" "),t("td",[_._v("空")]),_._v(" "),t("td",[_._v("否")]),_._v(" "),t("td",[_._v("用户头像")])]),_._v(" "),t("tr",[t("td",[_._v("head_image_thumb")]),_._v(" "),t("td",[_._v("varchar")]),_._v(" "),t("td",[_._v("255")]),_._v(" "),t("td",[_._v("空")]),_._v(" "),t("td",[_._v("否")]),_._v(" "),t("td",[_._v("用户头像缩略图")])]),_._v(" "),t("tr",[t("td",[_._v("sex")]),_._v(" "),t("td",[_._v("tinyint")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("否")]),_._v(" "),t("td",[_._v("性别 0:男 1:女")])]),_._v(" "),t("tr",[t("td",[_._v("type")]),_._v(" "),t("td",[_._v("smallint")]),_._v(" "),t("td",[_._v("6")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("否")]),_._v(" "),t("td",[_._v("用户类型 1:普通用户 2:审核账户")])]),_._v(" "),t("tr",[t("td",[_._v("signature")]),_._v(" "),t("td",[_._v("varchar")]),_._v(" "),t("td",[_._v("1024")]),_._v(" "),t("td",[_._v("空")]),_._v(" "),t("td",[_._v("否")]),_._v(" "),t("td",[_._v("个性签名")])]),_._v(" "),t("tr",[t("td",[_._v("last_login_time")]),_._v(" "),t("td",[_._v("datetime")]),_._v(" "),t("td",[_._v("默认")]),_._v(" "),t("td",[_._v("NULL")]),_._v(" "),t("td",[_._v("否")]),_._v(" "),t("td",[_._v("最后登录时间")])]),_._v(" "),t("tr",[t("td",[_._v("created_time")]),_._v(" "),t("td",[_._v("datetime")]),_._v(" "),t("td",[_._v("默认")]),_._v(" "),t("td",[_._v("NULL")]),_._v(" "),t("td",[_._v("否")]),_._v(" "),t("td",[_._v("创建时间")])])])]),_._v(" "),t("h3",{attrs:{id:"_3-2-好友关系模型设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-好友关系模型设计"}},[_._v("#")]),_._v(" 3.2 好友关系模型设计")]),_._v(" "),t("h2",{attrs:{id:"查看完整文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看完整文章"}},[_._v("#")]),_._v(" 查看完整文章")]),_._v(" "),t("p",[_._v("加入"),t("a",{attrs:{href:"https://public.zsxq.com/groups/48848484411888.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("冰河技术"),t("OutboundLink")],1),_._v("知识星球，解锁完整技术文章、小册、视频与完整代码")])])}),[],!1,null,null,null);t.default=d.exports}}]);